var Pe=Object.defineProperty;var Ge=(D,I,O)=>I in D?Pe(D,I,{enumerable:!0,configurable:!0,writable:!0,value:O}):D[I]=O;var pe=(D,I,O)=>Ge(D,typeof I!="symbol"?I+"":I,O);import{a2 as Oe,a3 as xe,a1 as te}from"./index-OYM-EJXU.js";var re={},Q={},se={},V={},K={},de;function Te(){if(de)return K;de=1,Object.defineProperty(K,"__esModule",{value:!0});function D(_){return I(_)}K.clone=D;function I(_){return Array.isArray(_)?O(_):typeof _=="object"?b(_):_}function O(_){for(var l=[],d=0,u=_.length;d<u;d++)l[d]=I(_[d]);return l}function b(_){var l={};for(var d in _)l[d]=I(_[d]);return l}function j(_){for(var l=[],d=1;d<arguments.length;d++)l[d-1]=arguments[d];return l.forEach(function(u){for(var i in u)_[i]=u[i]}),_}K.mergeObjects=j;var E=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/,R=function(){function _(){}return _.hasCaptures=function(l){return E.test(l)},_.replaceCaptures=function(l,d,u){return l.replace(E,function(i,o,f,S){var k=u[parseInt(o||f,10)];if(k){for(var p=d.substring(k.start,k.end);p[0]===".";)p=p.substring(1);switch(S){case"downcase":return p.toLowerCase();case"upcase":return p.toUpperCase();default:return p}}else return i})},_}();return K.RegexSource=R,K}var z={},ge;function je(){if(ge)return z;ge=1;var D=z.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var h in a)a.hasOwnProperty(h)&&(t[h]=a[h])};return function(t,a){v(t,a);function h(){this.constructor=t}t.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)}}();Object.defineProperty(z,"__esModule",{value:!0});var I=xe,O=Te(),b=Oe(),j=/\\(\d+)/,E=/\\(\d+)/g,R=function(){function v(t,a,h,y){this.$location=t,this.id=a,this._name=h||null,this._nameIsCapturing=O.RegexSource.hasCaptures(this._name),this._contentName=y||null,this._contentNameIsCapturing=O.RegexSource.hasCaptures(this._contentName)}return Object.defineProperty(v.prototype,"debugName",{get:function(){return this.constructor.name+"#"+this.id+" @ "+I.basename(this.$location.filename)+":"+this.$location.line},enumerable:!0,configurable:!0}),v.prototype.getName=function(t,a){return this._nameIsCapturing?O.RegexSource.replaceCaptures(this._name,t,a):this._name},v.prototype.getContentName=function(t,a){return this._contentNameIsCapturing?O.RegexSource.replaceCaptures(this._contentName,t,a):this._contentName},v.prototype.collectPatternsRecursive=function(t,a,h){throw new Error("Implement me!")},v.prototype.compile=function(t,a,h,y){throw new Error("Implement me!")},v}();z.Rule=R;var _=function(v){D(t,v);function t(a,h,y,m,G){var x=v.call(this,a,h,y,m)||this;return x.retokenizeCapturedWithRuleId=G,x}return t}(R);z.CaptureRule=_;var l=function(){function v(t,a,h){h===void 0&&(h=!0),h?this._handleAnchors(t):(this.source=t,this.hasAnchor=!1),this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()),this.ruleId=a,this.hasBackReferences=j.test(this.source)}return v.prototype.clone=function(){return new v(this.source,this.ruleId,!0)},v.prototype.setSource=function(t){this.source!==t&&(this.source=t,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))},v.prototype._handleAnchors=function(t){if(t){var a=void 0,h=void 0,y=void 0,m=void 0,G=0,x=[],B=!1;for(a=0,h=t.length;a<h;a++)y=t.charAt(a),y==="\\"&&a+1<h&&(m=t.charAt(a+1),m==="z"?(x.push(t.substring(G,a)),x.push("$(?!\\n)(?<!\\n)"),G=a+2):(m==="A"||m==="G")&&(B=!0),a++);this.hasAnchor=B,G===0?this.source=t:(x.push(t.substring(G,h)),this.source=x.join(""))}else this.hasAnchor=!1,this.source=t},v.prototype.resolveBackReferences=function(t,a){var h=a.map(function(y){return t.substring(y.start,y.end)});return E.lastIndex=0,this.source.replace(E,function(y,m){return k(h[parseInt(m,10)]||"")})},v.prototype._buildAnchorCache=function(){var t=[],a=[],h=[],y=[],m,G,x,B;for(m=0,G=this.source.length;m<G;m++)x=this.source.charAt(m),t[m]=x,a[m]=x,h[m]=x,y[m]=x,x==="\\"&&m+1<G&&(B=this.source.charAt(m+1),B==="A"?(t[m+1]="￿",a[m+1]="￿",h[m+1]="A",y[m+1]="A"):B==="G"?(t[m+1]="￿",a[m+1]="G",h[m+1]="￿",y[m+1]="G"):(t[m+1]=B,a[m+1]=B,h[m+1]=B,y[m+1]=B),m++);return{A0_G0:t.join(""),A0_G1:a.join(""),A1_G0:h.join(""),A1_G1:y.join("")}},v.prototype.resolveAnchors=function(t,a){return this.hasAnchor?t?a?this._anchorCache.A1_G1:this._anchorCache.A1_G0:a?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source},v}();z.RegExpSource=l;function d(v){return new b.OnigScanner(v)}function u(v){var t=new b.OnigString(v);return t.$str=v,t}z.createOnigString=u;function i(v){return v.$str}z.getString=i;var o=function(){function v(){this._items=[],this._hasAnchors=!1,this._cached=null,this._cachedSources=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}return v.prototype.push=function(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor},v.prototype.unshift=function(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor},v.prototype.length=function(){return this._items.length},v.prototype.setSource=function(t,a){this._items[t].source!==a&&(this._cached=null,this._anchorCache.A0_G0=null,this._anchorCache.A0_G1=null,this._anchorCache.A1_G0=null,this._anchorCache.A1_G1=null,this._items[t].setSource(a))},v.prototype.compile=function(t,a,h){if(this._hasAnchors)return this._anchorCache={A0_G0:this._anchorCache.A0_G0||(a===!1&&h===!1?this._resolveAnchors(a,h):null),A0_G1:this._anchorCache.A0_G1||(a===!1&&h===!0?this._resolveAnchors(a,h):null),A1_G0:this._anchorCache.A1_G0||(a===!0&&h===!1?this._resolveAnchors(a,h):null),A1_G1:this._anchorCache.A1_G1||(a===!0&&h===!0?this._resolveAnchors(a,h):null)},a?h?this._anchorCache.A1_G1:this._anchorCache.A1_G0:h?this._anchorCache.A0_G1:this._anchorCache.A0_G0;if(!this._cached){var y=this._items.map(function(m){return m.source});this._cached={scanner:d(y),rules:this._items.map(function(m){return m.ruleId}),debugRegExps:y}}return this._cached},v.prototype._resolveAnchors=function(t,a){var h=this._items.map(function(y){return y.resolveAnchors(t,a)});return{scanner:d(h),rules:this._items.map(function(y){return y.ruleId}),debugRegExps:h}},v}();z.RegExpSourceList=o;var f=function(v){D(t,v);function t(a,h,y,m,G){var x=v.call(this,a,h,y,null)||this;return x._match=new l(m,x.id),x.captures=G,x._cachedCompiledPatterns=null,x}return Object.defineProperty(t.prototype,"debugMatchRegExp",{get:function(){return""+this._match.source},enumerable:!0,configurable:!0}),t.prototype.collectPatternsRecursive=function(a,h,y){h.push(this._match)},t.prototype.compile=function(a,h,y,m){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new o,this.collectPatternsRecursive(a,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns.compile(a,y,m)},t}(R);z.MatchRule=f;var S=function(v){D(t,v);function t(a,h,y,m,G){var x=v.call(this,a,h,y,m)||this;return x.patterns=G.patterns,x.hasMissingPatterns=G.hasMissingPatterns,x._cachedCompiledPatterns=null,x}return t.prototype.collectPatternsRecursive=function(a,h,y){var m,G,x;for(m=0,G=this.patterns.length;m<G;m++)x=a.getRule(this.patterns[m]),x.collectPatternsRecursive(a,h,!1)},t.prototype.compile=function(a,h,y,m){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new o,this.collectPatternsRecursive(a,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns.compile(a,y,m)},t}(R);z.IncludeOnlyRule=S;function k(v){return v.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var p=function(v){D(t,v);function t(a,h,y,m,G,x,B,n,e,r){var c=v.call(this,a,h,y,m)||this;return c._begin=new l(G,c.id),c.beginCaptures=x,c._end=new l(B,-1),c.endHasBackReferences=c._end.hasBackReferences,c.endCaptures=n,c.applyEndPatternLast=e||!1,c.patterns=r.patterns,c.hasMissingPatterns=r.hasMissingPatterns,c._cachedCompiledPatterns=null,c}return Object.defineProperty(t.prototype,"debugBeginRegExp",{get:function(){return""+this._begin.source},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"debugEndRegExp",{get:function(){return""+this._end.source},enumerable:!0,configurable:!0}),t.prototype.getEndWithResolvedBackReferences=function(a,h){return this._end.resolveBackReferences(a,h)},t.prototype.collectPatternsRecursive=function(a,h,y){if(y){var m=void 0,G=void 0,x=void 0;for(m=0,G=this.patterns.length;m<G;m++)x=a.getRule(this.patterns[m]),x.collectPatternsRecursive(a,h,!1)}else h.push(this._begin)},t.prototype.compile=function(a,h,y,m){var G=this._precompile(a);return this._end.hasBackReferences&&(this.applyEndPatternLast?G.setSource(G.length()-1,h):G.setSource(0,h)),this._cachedCompiledPatterns.compile(a,y,m)},t.prototype._precompile=function(a){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new o,this.collectPatternsRecursive(a,this._cachedCompiledPatterns,!0),this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)),this._cachedCompiledPatterns},t}(R);z.BeginEndRule=p;var g=function(v){D(t,v);function t(a,h,y,m,G,x,B,n,e){var r=v.call(this,a,h,y,m)||this;return r._begin=new l(G,r.id),r.beginCaptures=x,r.whileCaptures=n,r._while=new l(B,-2),r.whileHasBackReferences=r._while.hasBackReferences,r.patterns=e.patterns,r.hasMissingPatterns=e.hasMissingPatterns,r._cachedCompiledPatterns=null,r._cachedCompiledWhilePatterns=null,r}return t.prototype.getWhileWithResolvedBackReferences=function(a,h){return this._while.resolveBackReferences(a,h)},t.prototype.collectPatternsRecursive=function(a,h,y){if(y){var m=void 0,G=void 0,x=void 0;for(m=0,G=this.patterns.length;m<G;m++)x=a.getRule(this.patterns[m]),x.collectPatternsRecursive(a,h,!1)}else h.push(this._begin)},t.prototype.compile=function(a,h,y,m){return this._precompile(a),this._cachedCompiledPatterns.compile(a,y,m)},t.prototype._precompile=function(a){this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new o,this.collectPatternsRecursive(a,this._cachedCompiledPatterns,!0))},t.prototype.compileWhile=function(a,h,y,m){return this._precompileWhile(a),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,h),this._cachedCompiledWhilePatterns.compile(a,y,m)},t.prototype._precompileWhile=function(a){this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new o,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while))},t}(R);z.BeginWhileRule=g;var L=function(){function v(){}return v.createCaptureRule=function(t,a,h,y,m){return t.registerRule(function(G){return new _(a,G,h,y,m)})},v.getCompiledRuleId=function(t,a,h){return t.id||a.registerRule(function(y){return t.id=y,t.match?new f(t.$vscodeTextmateLocation,t.id,t.name,t.match,v._compileCaptures(t.captures,a,h)):t.begin?t.while?new g(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,v._compileCaptures(t.beginCaptures||t.captures,a,h),t.while,v._compileCaptures(t.whileCaptures||t.captures,a,h),v._compilePatterns(t.patterns,a,h)):new p(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,v._compileCaptures(t.beginCaptures||t.captures,a,h),t.end,v._compileCaptures(t.endCaptures||t.captures,a,h),t.applyEndPatternLast,v._compilePatterns(t.patterns,a,h)):(t.repository&&(h=O.mergeObjects({},h,t.repository)),new S(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,v._compilePatterns(t.patterns,a,h)))}),t.id},v._compileCaptures=function(t,a,h){var y=[],m,G,x,B;if(t){G=0;for(B in t)B!=="$vscodeTextmateLocation"&&(m=parseInt(B,10),m>G&&(G=m));for(x=0;x<=G;x++)y[x]=null;for(B in t)if(B!=="$vscodeTextmateLocation"){m=parseInt(B,10);var n=0;t[B].patterns&&(n=v.getCompiledRuleId(t[B],a,h)),y[m]=v.createCaptureRule(a,t[B].$vscodeTextmateLocation,t[B].name,t[B].contentName,n)}}return y},v._compilePatterns=function(t,a,h){var y=[],m,G,x,B,n,e,r;if(t)for(G=0,x=t.length;G<x;G++){if(m=t[G],B=-1,m.include)if(m.include.charAt(0)==="#"){var c=h[m.include.substr(1)];c&&(B=v.getCompiledRuleId(c,a,h))}else if(m.include==="$base"||m.include==="$self")B=v.getCompiledRuleId(h[m.include],a,h);else{var s=null,A=null,T=m.include.indexOf("#");if(T>=0?(s=m.include.substring(0,T),A=m.include.substring(T+1)):s=m.include,n=a.getExternalGrammar(s,h),n)if(A){var M=n.repository[A];M&&(B=v.getCompiledRuleId(M,a,n.repository))}else B=v.getCompiledRuleId(n.repository.$self,a,n.repository)}else B=v.getCompiledRuleId(m,a,h);if(B!==-1){if(e=a.getRule(B),r=!1,(e instanceof S||e instanceof p||e instanceof g)&&e.hasMissingPatterns&&e.patterns.length===0&&(r=!0),r)continue;y.push(B)}}return{patterns:y,hasMissingPatterns:(t?t.length:0)!==y.length}},v}();return z.RuleFactory=L,z}var oe={},_e;function Le(){if(_e)return oe;_e=1,Object.defineProperty(oe,"__esModule",{value:!0});function D(b,j){for(var E=[],R=O(b),_=R.next();_!==null;){var l=0;if(_.length===2&&_.charAt(1)===":"){switch(_.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log("Unknown priority "+_+" in scope selector")}_=R.next()}var d=i();if(d&&E.push({matcher:d,priority:l}),_!==",")break;_=R.next()}return E;function u(){if(_==="-"){_=R.next();var f=u();return function(p){return f&&!f(p)}}if(_==="("){_=R.next();var S=o();return _===")"&&(_=R.next()),S}if(I(_)){var k=[];do k.push(_),_=R.next();while(I(_));return function(p){return j(k,p)}}return null}function i(){for(var f=[],S=u();S;)f.push(S),S=u();return function(k){return f.every(function(p){return p(k)})}}function o(){for(var f=[],S=i();S&&(f.push(S),_==="|"||_===",");){do _=R.next();while(_==="|"||_===",");S=i()}return function(k){return f.some(function(p){return p(k)})}}}oe.createMatchers=D;function I(b){return b&&b.match(/[\w\.:]+/)}function O(b){var j=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,E=j.exec(b);return{next:function(){if(!E)return null;var R=E[0];return E=j.exec(b),R}}}return oe}var ne={},ve;function Ie(){if(ve)return ne;ve=1;var D={};return Object.defineProperty(ne,"__esModule",{value:!0}),ne.CAPTURE_METADATA=typeof process>"u"?!1:!!D.VSCODE_TEXTMATE_DEBUG,ne.IN_DEBUG_MODE=typeof process>"u"?!1:!!D.VSCODE_TEXTMATE_DEBUG,ne}var me;function ke(){if(me)return V;me=1,Object.defineProperty(V,"__esModule",{value:!0});var D=Te(),I=je(),O=Le(),b=Ie();function j(n,e,r,c,s){return new f(n,e,r,c,s)}V.createGrammar=j;function E(n,e){for(var r=0,c=e.length;r<c;r++){Array.isArray(e[r].patterns)&&E(n,e[r].patterns);var s=e[r].include;if(s&&!(s==="$base"||s==="$self")&&s.charAt(0)!=="#"){var A=s.indexOf("#");A>=0?n[s.substring(0,A)]=!0:n[s]=!0}}}function R(n,e){for(var r in e){var c=e[r];c.patterns&&Array.isArray(c.patterns)&&E(n,c.patterns),c.repository&&R(n,c.repository)}}function _(n,e){e.patterns&&Array.isArray(e.patterns)&&E(n,e.patterns),e.repository&&R(n,e.repository),delete n[e.scopeName]}V.collectIncludedScopes=_;function l(n,e){if(!n)return!1;if(n===e)return!0;var r=e.length;return n.length>r&&n.substr(0,r)===e&&n[r]==="."}function d(n,e){if(e.length<n.length)return!1;var r=0;return n.every(function(c){for(var s=r;s<e.length;s++)if(l(e[s],c))return r=s+1,!0;return!1})}function u(n,e,r,c,s){for(var A=O.createMatchers(e,d),T=I.RuleFactory.getCompiledRuleId(r,c,s.repository),M=0,w=A;M<w.length;M++){var N=w[M];n.push({matcher:N.matcher,ruleId:T,grammar:s,priority:N.priority})}}var i=function(){function n(e,r,c,s){this.scopeName=e,this.languageId=r,this.tokenType=c,this.themeData=s}return n}();V.ScopeMetadata=i;var o=function(){function n(e,r,c){if(this._initialLanguage=e,this._themeProvider=r,this.onDidChangeTheme(),this._embeddedLanguages=Object.create(null),c)for(var s=Object.keys(c),A=0,T=s.length;A<T;A++){var M=s[A],w=c[M];if(typeof w!="number"||w===0){console.warn("Invalid embedded language found at scope "+M+": <<"+w+">>");continue}this._embeddedLanguages[M]=w}var N=Object.keys(this._embeddedLanguages).map(function(F){return n._escapeRegExpCharacters(F)});N.length===0?this._embeddedLanguagesRegex=null:(N.sort(),N.reverse(),this._embeddedLanguagesRegex=new RegExp("^(("+N.join(")|(")+"))($|\\.)",""))}return n.prototype.onDidChangeTheme=function(){this._cache=Object.create(null),this._defaultMetaData=new i("",this._initialLanguage,0,[this._themeProvider.getDefaults()])},n.prototype.getDefaultMetadata=function(){return this._defaultMetaData},n._escapeRegExpCharacters=function(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},n.prototype.getMetadataForScope=function(e){if(e===null)return n._NULL_SCOPE_METADATA;var r=this._cache[e];return r||(r=this._doGetMetadataForScope(e),this._cache[e]=r,r)},n.prototype._doGetMetadataForScope=function(e){var r=this._scopeToLanguage(e),c=this._toStandardTokenType(e),s=this._themeProvider.themeMatch(e);return new i(e,r,c,s)},n.prototype._scopeToLanguage=function(e){if(!e||!this._embeddedLanguagesRegex)return 0;var r=e.match(this._embeddedLanguagesRegex);if(!r)return 0;var c=this._embeddedLanguages[r[1]]||0;return c||0},n.prototype._toStandardTokenType=function(e){var r=e.match(n.STANDARD_TOKEN_TYPE_REGEXP);if(!r)return 0;switch(r[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"meta.embedded":return 8}throw new Error("Unexpected match for standard token type!")},n._NULL_SCOPE_METADATA=new i("",0,0,null),n.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/,n}(),f=function(){function n(e,r,c,s,A){if(this._scopeMetadataProvider=new o(r,A,c),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[],this._includedGrammars={},this._grammarRepository=A,this._grammar=S(e,null),this._tokenTypeMatchers=[],s)for(var T=0,M=Object.keys(s);T<M.length;T++)for(var w=M[T],N=O.createMatchers(w,d),F=0,$=N;F<$.length;F++){var P=$[F];this._tokenTypeMatchers.push({matcher:P.matcher,type:s[w]})}}return n.prototype.onDidChangeTheme=function(){this._scopeMetadataProvider.onDidChangeTheme()},n.prototype.getMetadataForScope=function(e){return this._scopeMetadataProvider.getMetadataForScope(e)},n.prototype.getInjections=function(){var e=this;if(!this._injections){this._injections=[];var r=this._grammar.injections;if(r)for(var c in r)u(this._injections,c,r[c],this,this._grammar);if(this._grammarRepository){var s=this._grammarRepository.injections(this._grammar.scopeName);s&&s.forEach(function(A){var T=e.getExternalGrammar(A);if(T){var M=T.injectionSelector;M&&u(e._injections,M,T,e,T)}})}this._injections.sort(function(A,T){return A.priority-T.priority})}return this._injections.length===0?this._injections:this._injections},n.prototype.registerRule=function(e){var r=++this._lastRuleId,c=e(r);return this._ruleId2desc[r]=c,c},n.prototype.getRule=function(e){return this._ruleId2desc[e]},n.prototype.getExternalGrammar=function(e,r){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){var c=this._grammarRepository.lookup(e);if(c)return this._includedGrammars[e]=S(c,r&&r.$base),this._includedGrammars[e]}},n.prototype.tokenizeLine=function(e,r){var c=this._tokenize(e,r,!1);return{tokens:c.lineTokens.getResult(c.ruleStack,c.lineLength),ruleStack:c.ruleStack}},n.prototype.tokenizeLine2=function(e,r){var c=this._tokenize(e,r,!0);return{tokens:c.lineTokens.getBinaryResult(c.ruleStack,c.lineLength),ruleStack:c.ruleStack}},n.prototype._tokenize=function(e,r,c){this._rootId===-1&&(this._rootId=I.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository));var s;if(!r||r===m.NULL){s=!0;var A=this._scopeMetadataProvider.getDefaultMetadata(),T=A.themeData[0],M=h.set(0,A.languageId,A.tokenType,T.fontStyle,T.foreground,T.background),w=this.getRule(this._rootId).getName(null,null),N=this._scopeMetadataProvider.getMetadataForScope(w),F=y.mergeMetadata(M,null,N),$=new y(null,w,F);r=new m(null,this._rootId,-1,null,$,$)}else s=!1,r.reset();e=e+`
`;var P=I.createOnigString(e),J=I.getString(P).length,W=new x(c,e,this._tokenTypeMatchers),C=a(this,P,s,0,r,W);return{lineLength:J,lineTokens:W,ruleStack:C}},n}();V.Grammar=f;function S(n,e){return n=D.clone(n),n.repository=n.repository||{},n.repository.$self={$vscodeTextmateLocation:n.$vscodeTextmateLocation,patterns:n.patterns,name:n.scopeName},n.repository.$base=e||n.repository.$self,n}function k(n,e,r,c,s,A,T){if(A.length!==0){for(var M=Math.min(A.length,T.length),w=[],N=T[0].end,F=0;F<M;F++){var $=A[F];if($!==null){var P=T[F];if(P.length!==0){if(P.start>N)break;for(;w.length>0&&w[w.length-1].endPos<=P.start;)s.produceFromScopes(w[w.length-1].scopes,w[w.length-1].endPos),w.pop();if(w.length>0?s.produceFromScopes(w[w.length-1].scopes,P.start):s.produce(c,P.start),$.retokenizeCapturedWithRuleId){var J=$.getName(I.getString(e),T),W=c.contentNameScopesList.push(n,J),C=$.getContentName(I.getString(e),T),q=W.push(n,C),U=c.push($.retokenizeCapturedWithRuleId,P.start,null,W,q);a(n,I.createOnigString(I.getString(e).substring(0,P.end)),r&&P.start===0,P.start,U,s);continue}var ee=$.getName(I.getString(e),T);if(ee!==null){var ce=w.length>0?w[w.length-1].scopes:c.contentNameScopesList,Z=ce.push(n,ee);w.push(new G(Z,P.end))}}}}for(;w.length>0;)s.produceFromScopes(w[w.length-1].scopes,w[w.length-1].endPos),w.pop()}}function p(n){for(var e=[],r=0,c=n.rules.length;r<c;r++)e.push("   - "+n.rules[r]+": "+n.debugRegExps[r]);return e.join(`
`)}function g(n,e,r,c,s,A,T){for(var M=Number.MAX_VALUE,w=null,N,F=0,$=A.contentNameScopesList.generateScopes(),P=0,J=n.length;P<J;P++){var W=n[P];if(W.matcher($)){var C=e.getRule(W.ruleId).compile(e,null,c,s===T),q=C.scanner.findNextMatchSync(r,s);if(b.IN_DEBUG_MODE&&(console.log("  scanning for injections"),console.log(p(C))),!!q){var U=q.captureIndices[0].start;if(!(U>=M)&&(M=U,w=q.captureIndices,N=C.rules[q.index],F=W.priority,M===s))break}}}return w?{priorityMatch:F===-1,captureIndices:w,matchedRuleId:N}:null}function L(n,e,r,c,s,A){var T=s.getRule(n),M=T.compile(n,s.endRule,r,c===A),w=M.scanner.findNextMatchSync(e,c);return b.IN_DEBUG_MODE&&(console.log("  scanning for"),console.log(p(M))),w?{captureIndices:w.captureIndices,matchedRuleId:M.rules[w.index]}:null}function v(n,e,r,c,s,A){var T=L(n,e,r,c,s,A),M=n.getInjections();if(M.length===0)return T;var w=g(M,n,e,r,c,s,A);if(!w)return T;if(!T)return w;var N=T.captureIndices[0].start,F=w.captureIndices[0].start;return F<N||w.priorityMatch&&F===N?w:T}function t(n,e,r,c,s,A){for(var T=-1,M=[],w=s;w;w=w.pop()){var N=w.getRule(n);N instanceof I.BeginWhileRule&&M.push({rule:N,stack:w})}for(var F=M.pop();F;F=M.pop()){var $=F.rule.compileWhile(n,F.stack.endRule,r,T===c),P=$.scanner.findNextMatchSync(e,c);if(b.IN_DEBUG_MODE&&(console.log("  scanning for while rule"),console.log(p($))),P){var J=$.rules[P.index];if(J!==-2){s=F.stack.pop();break}P.captureIndices&&P.captureIndices.length&&(A.produce(F.stack,P.captureIndices[0].start),k(n,e,r,F.stack,A,F.rule.whileCaptures,P.captureIndices),A.produce(F.stack,P.captureIndices[0].end),T=P.captureIndices[0].end,P.captureIndices[0].end>c&&(c=P.captureIndices[0].end,r=!1))}else{s=F.stack.pop();break}}return{stack:s,linePos:c,anchorPosition:T,isFirstLine:r}}function a(n,e,r,c,s,A){var T=I.getString(e).length,M=!1,w=t(n,e,r,c,s,A);s=w.stack,c=w.linePos,r=w.isFirstLine;for(var N=w.anchorPosition;!M;)F();function F(){b.IN_DEBUG_MODE&&(console.log(""),console.log("@@scanNext: |"+I.getString(e).replace(/\n$/,"\\n").substr(c)+"|"));var $=v(n,e,r,c,s,N);if(!$){b.IN_DEBUG_MODE&&console.log("  no more matches."),A.produce(s,T),M=!0;return}var P=$.captureIndices,J=$.matchedRuleId,W=P&&P.length>0?P[0].end>c:!1;if(J===-1){var C=s.getRule(n);b.IN_DEBUG_MODE&&console.log("  popping "+C.debugName+" - "+C.debugEndRegExp),A.produce(s,P[0].start),s=s.setContentNameScopesList(s.nameScopesList),k(n,e,r,s,A,C.endCaptures,P),A.produce(s,P[0].end);var q=s;if(s=s.pop(),!W&&q.getEnterPos()===c){console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),s=q,A.produce(s,T),M=!0;return}}else{var U=n.getRule(J);A.produce(s,P[0].start);var ee=s,ce=U.getName(I.getString(e),P),Z=s.contentNameScopesList.push(n,ce);if(s=s.push(J,c,null,Z,Z),U instanceof I.BeginEndRule){var H=U;b.IN_DEBUG_MODE&&console.log("  pushing "+H.debugName+" - "+H.debugBeginRegExp),k(n,e,r,s,A,H.beginCaptures,P),A.produce(s,P[0].end),N=P[0].end;var he=H.getContentName(I.getString(e),P),fe=Z.push(n,he);if(s=s.setContentNameScopesList(fe),H.endHasBackReferences&&(s=s.setEndRule(H.getEndWithResolvedBackReferences(I.getString(e),P))),!W&&ee.hasSameRuleAs(s)){console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),s=s.pop(),A.produce(s,T),M=!0;return}}else if(U instanceof I.BeginWhileRule){var H=U;b.IN_DEBUG_MODE&&console.log("  pushing "+H.debugName),k(n,e,r,s,A,H.beginCaptures,P),A.produce(s,P[0].end),N=P[0].end;var he=H.getContentName(I.getString(e),P),fe=Z.push(n,he);if(s=s.setContentNameScopesList(fe),H.whileHasBackReferences&&(s=s.setEndRule(H.getWhileWithResolvedBackReferences(I.getString(e),P))),!W&&ee.hasSameRuleAs(s)){console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),s=s.pop(),A.produce(s,T),M=!0;return}}else{var le=U;if(b.IN_DEBUG_MODE&&console.log("  matched "+le.debugName+" - "+le.debugMatchRegExp),k(n,e,r,s,A,le.captures,P),A.produce(s,P[0].end),s=s.pop(),!W){console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),s=s.safePop(),A.produce(s,T),M=!0;return}}}P[0].end>c&&(c=P[0].end,r=!1)}return s}var h=function(){function n(){}return n.toBinaryStr=function(e){for(var r=e.toString(2);r.length<32;)r="0"+r;return r},n.printMetadata=function(e){var r=n.getLanguageId(e),c=n.getTokenType(e),s=n.getFontStyle(e),A=n.getForeground(e),T=n.getBackground(e);console.log({languageId:r,tokenType:c,fontStyle:s,foreground:A,background:T})},n.getLanguageId=function(e){return(e&255)>>>0},n.getTokenType=function(e){return(e&1792)>>>8},n.getFontStyle=function(e){return(e&14336)>>>11},n.getForeground=function(e){return(e&8372224)>>>14},n.getBackground=function(e){return(e&4286578688)>>>23},n.set=function(e,r,c,s,A,T){var M=n.getLanguageId(e),w=n.getTokenType(e),N=n.getFontStyle(e),F=n.getForeground(e),$=n.getBackground(e);return r!==0&&(M=r),c!==0&&(w=c===8?0:c),s!==-1&&(N=s),A!==0&&(F=A),T!==0&&($=T),(M<<0|w<<8|N<<11|F<<14|$<<23)>>>0},n}();V.StackElementMetadata=h;var y=function(){function n(e,r,c){this.parent=e,this.scope=r,this.metadata=c}return n._equals=function(e,r){do{if(e===r)return!0;if(e.scope!==r.scope||e.metadata!==r.metadata)return!1;if(e=e.parent,r=r.parent,!e&&!r)return!0;if(!e||!r)return!1}while(!0)},n.prototype.equals=function(e){return n._equals(this,e)},n._matchesScope=function(e,r,c){return r===e||e.substring(0,c.length)===c},n._matches=function(e,r){if(r===null)return!0;for(var c=r.length,s=0,A=r[s],T=A+".";e;){if(this._matchesScope(e.scope,A,T)){if(s++,s===c)return!0;A=r[s],T=A+"."}e=e.parent}return!1},n.mergeMetadata=function(e,r,c){if(c===null)return e;var s=-1,A=0,T=0;if(c.themeData!==null)for(var M=0,w=c.themeData.length;M<w;M++){var N=c.themeData[M];if(this._matches(r,N.parentScopes)){s=N.fontStyle,A=N.foreground,T=N.background;break}}return h.set(e,c.languageId,c.tokenType,s,A,T)},n._push=function(e,r,c){for(var s=0,A=c.length;s<A;s++){var T=c[s],M=r.getMetadataForScope(T),w=n.mergeMetadata(e.metadata,e,M);e=new n(e,T,w)}return e},n.prototype.push=function(e,r){return r===null?this:r.indexOf(" ")>=0?n._push(this,e,r.split(/ /g)):n._push(this,e,[r])},n._generateScopes=function(e){for(var r=[],c=0;e;)r[c++]=e.scope,e=e.parent;return r.reverse(),r},n.prototype.generateScopes=function(){return n._generateScopes(this)},n}();V.ScopeListElement=y;var m=function(){function n(e,r,c,s,A,T){this.parent=e,this.depth=this.parent?this.parent.depth+1:1,this.ruleId=r,this._enterPos=c,this.endRule=s,this.nameScopesList=A,this.contentNameScopesList=T}return n._structuralEquals=function(e,r){do{if(e===r)return!0;if(e.depth!==r.depth||e.ruleId!==r.ruleId||e.endRule!==r.endRule)return!1;if(e=e.parent,r=r.parent,!e&&!r)return!0;if(!e||!r)return!1}while(!0)},n._equals=function(e,r){return e===r?!0:this._structuralEquals(e,r)?e.contentNameScopesList.equals(r.contentNameScopesList):!1},n.prototype.clone=function(){return this},n.prototype.equals=function(e){return e===null?!1:n._equals(this,e)},n._reset=function(e){for(;e;)e._enterPos=-1,e=e.parent},n.prototype.reset=function(){n._reset(this)},n.prototype.pop=function(){return this.parent},n.prototype.safePop=function(){return this.parent?this.parent:this},n.prototype.push=function(e,r,c,s,A){return new n(this,e,r,c,s,A)},n.prototype.getEnterPos=function(){return this._enterPos},n.prototype.getRule=function(e){return e.getRule(this.ruleId)},n.prototype._writeString=function(e,r){return this.parent&&(r=this.parent._writeString(e,r)),e[r++]="("+this.ruleId+", TODO-"+this.nameScopesList+", TODO-"+this.contentNameScopesList+")",r},n.prototype.toString=function(){var e=[];return this._writeString(e,0),"["+e.join(",")+"]"},n.prototype.setContentNameScopesList=function(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this.endRule,this.nameScopesList,e)},n.prototype.setEndRule=function(e){return this.endRule===e?this:new n(this.parent,this.ruleId,this._enterPos,e,this.nameScopesList,this.contentNameScopesList)},n.prototype.hasSameRuleAs=function(e){return this.ruleId===e.ruleId},n.NULL=new n(null,0,0,null,null,null),n}();V.StackElement=m;var G=function(){function n(e,r){this.scopes=e,this.endPos=r}return n}();V.LocalStackElement=G;var x=function(){function n(e,r,c){this._emitBinaryTokens=e,this._tokenTypeOverrides=c,b.IN_DEBUG_MODE&&(this._lineText=r),this._emitBinaryTokens?this._binaryTokens=[]:this._tokens=[],this._lastTokenEndIndex=0}return n.prototype.produce=function(e,r){this.produceFromScopes(e.contentNameScopesList,r)},n.prototype.produceFromScopes=function(e,r){if(!(this._lastTokenEndIndex>=r)){if(this._emitBinaryTokens){for(var c=e.metadata,s=0,A=this._tokenTypeOverrides;s<A.length;s++){var T=A[s];T.matcher(e.generateScopes())&&(c=h.set(c,0,B(T.type),-1,0,0))}if(this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===c){this._lastTokenEndIndex=r;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(c),this._lastTokenEndIndex=r;return}var M=e.generateScopes();if(b.IN_DEBUG_MODE){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,r).replace(/\n$/,"\\n")+"|");for(var w=0;w<M.length;w++)console.log("      * "+M[w])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:r,scopes:M}),this._lastTokenEndIndex=r}},n.prototype.getResult=function(e,r){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===r-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,r),this._tokens[this._tokens.length-1].startIndex=0),this._tokens},n.prototype.getBinaryResult=function(e,r){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===r-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,r),this._binaryTokens[this._binaryTokens.length-2]=0);for(var c=new Uint32Array(this._binaryTokens.length),s=0,A=this._binaryTokens.length;s<A;s++)c[s]=this._binaryTokens[s];return c},n}();function B(n){switch(n){case 4:return 4;case 2:return 2;case 1:return 1;case 0:default:return 8}}return V}var ye;function De(){if(ye)return se;ye=1,Object.defineProperty(se,"__esModule",{value:!0});var D=ke(),I=function(){function O(b){this._theme=b,this._grammars={},this._rawGrammars={},this._injectionGrammars={}}return O.prototype.setTheme=function(b){var j=this;this._theme=b,Object.keys(this._grammars).forEach(function(E){var R=j._grammars[E];R.onDidChangeTheme()})},O.prototype.getColorMap=function(){return this._theme.getColorMap()},O.prototype.addGrammar=function(b,j){this._rawGrammars[b.scopeName]=b;var E={};return D.collectIncludedScopes(E,b),j&&(this._injectionGrammars[b.scopeName]=j,j.forEach(function(R){E[R]=!0})),Object.keys(E)},O.prototype.lookup=function(b){return this._rawGrammars[b]},O.prototype.injections=function(b){return this._injectionGrammars[b]},O.prototype.getDefaults=function(){return this._theme.getDefaults()},O.prototype.themeMatch=function(b){return this._theme.match(b)},O.prototype.grammarForScopeName=function(b,j,E,R){if(!this._grammars[b]){var _=this._rawGrammars[b];if(!_)return null;this._grammars[b]=D.createGrammar(_,j,E,R,this)}return this._grammars[b]},O}();return se.SyncRegistry=I,se}var ie={},Y={},Re;function Be(){if(Re)return Y;Re=1,Y.__esModule=!0,Y.parse=Y.parseWithLocation=void 0;function D(b,j,E){return O(b,j,E)}Y.parseWithLocation=D;function I(b){return O(b,null,null)}Y.parse=I;function O(b,j,E){var R=b.length,_=0,l=1,d=0;R>0&&b.charCodeAt(0)===65279&&(_=1);function u(C){if(E===null)_=_+C;else for(;C>0;){var q=b.charCodeAt(_);q===10?(_++,l++,d=0):(_++,d++),C--}}function i(C){E===null?_=C:u(C-_)}function o(){for(;_<R;){var C=b.charCodeAt(_);if(C!==32&&C!==9&&C!==13&&C!==10)break;u(1)}}function f(C){return b.substr(_,C.length)===C?(u(C.length),!0):!1}function S(C){var q=b.indexOf(C,_);i(q!==-1?q+C.length:R)}function k(C){var q=b.indexOf(C,_);if(q!==-1){var U=b.substring(_,q);return i(q+C.length),U}else{var U=b.substr(_);return i(R),U}}var p=0,g=null,L=[],v=[],t=null;function a(C,q){L.push(p),v.push(g),p=C,g=q}function h(){if(L.length===0)return y("illegal state stack");p=L.pop(),g=v.pop()}function y(C){throw new Error("Near offset "+_+": "+C+" ~~~"+b.substr(_,50)+"~~~")}var m={enterDict:function(){if(t===null)return y("missing <key>");var C={};E!==null&&(C[E]={filename:j,line:l,char:d}),g[t]=C,t=null,a(1,C)},enterArray:function(){if(t===null)return y("missing <key>");var C=[];g[t]=C,t=null,a(2,C)}},G={enterDict:function(){var C={};E!==null&&(C[E]={filename:j,line:l,char:d}),g.push(C),a(1,C)},enterArray:function(){var C=[];g.push(C),a(2,C)}};function x(){p===1?m.enterDict():p===2?G.enterDict():(g={},E!==null&&(g[E]={filename:j,line:l,char:d}),a(1,g))}function B(){if(p===1)h();else return y("unexpected </dict>")}function n(){p===1?m.enterArray():p===2?G.enterArray():(g=[],a(2,g))}function e(){if(p===1)return y("unexpected </array>");if(p===2)h();else return y("unexpected </array>")}function r(C){if(p===1){if(t!==null)return y("too many <key>");t=C}else return y("unexpected <key>")}function c(C){if(p===1){if(t===null)return y("missing <key>");g[t]=C,t=null}else p===2?g.push(C):g=C}function s(C){if(isNaN(C))return y("cannot parse float");if(p===1){if(t===null)return y("missing <key>");g[t]=C,t=null}else p===2?g.push(C):g=C}function A(C){if(isNaN(C))return y("cannot parse integer");if(p===1){if(t===null)return y("missing <key>");g[t]=C,t=null}else p===2?g.push(C):g=C}function T(C){if(p===1){if(t===null)return y("missing <key>");g[t]=C,t=null}else p===2?g.push(C):g=C}function M(C){if(p===1){if(t===null)return y("missing <key>");g[t]=C,t=null}else p===2?g.push(C):g=C}function w(C){if(p===1){if(t===null)return y("missing <key>");g[t]=C,t=null}else p===2?g.push(C):g=C}function N(C){return C.replace(/&#([0-9]+);/g,function(q,U){return String.fromCodePoint(parseInt(U,10))}).replace(/&#x([0-9a-f]+);/g,function(q,U){return String.fromCodePoint(parseInt(U,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(q){switch(q){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return q})}function F(){var C=k(">"),q=!1;return C.charCodeAt(C.length-1)===47&&(q=!0,C=C.substring(0,C.length-1)),{name:C.trim(),isClosed:q}}function $(C){if(C.isClosed)return"";var q=k("</");return S(">"),N(q)}for(;_<R&&(o(),!(_>=R));){var P=b.charCodeAt(_);if(u(1),P!==60)return y("expected <");if(_>=R)return y("unexpected end of input");var J=b.charCodeAt(_);if(J===63){u(1),S("?>");continue}if(J===33){if(u(1),f("--")){S("-->");continue}S(">");continue}if(J===47){if(u(1),o(),f("plist")){S(">");continue}if(f("dict")){S(">"),B();continue}if(f("array")){S(">"),e();continue}return y("unexpected closed tag")}var W=F();switch(W.name){case"dict":x(),W.isClosed&&B();continue;case"array":n(),W.isClosed&&e();continue;case"key":r($(W));continue;case"string":c($(W));continue;case"real":s(parseFloat($(W)));continue;case"integer":A(parseInt($(W),10));continue;case"date":T(new Date($(W)));continue;case"data":M($(W));continue;case"true":$(W),w(!0);continue;case"false":$(W),w(!1);continue}if(!/^plist/.test(W.name))return y("unexpected opened tag "+W.name)}return g}return Y}var ue={},Ce;function Ne(){if(Ce)return ue;Ce=1,Object.defineProperty(ue,"__esModule",{value:!0});function D(E,R){throw new Error("Near offset "+E.pos+": "+R+" ~~~"+E.source.substr(E.pos,50)+"~~~")}function I(E,R,_){var l=new O(E),d=new b,u=0,i=null,o=[],f=[];function S(){o.push(u),f.push(i)}function k(){u=o.pop(),i=f.pop()}function p(t){D(l,t)}for(;j(l,d);){if(u===0){if(i!==null&&p("too many constructs in root"),d.type===3){i={},_&&(i.$vscodeTextmateLocation=d.toLocation(R)),S(),u=1;continue}if(d.type===2){i=[],S(),u=4;continue}p("unexpected token in root")}if(u===2){if(d.type===5){k();continue}if(d.type===7){u=3;continue}p("expected , or }")}if(u===1||u===3){if(u===1&&d.type===5){k();continue}if(d.type===1){var g=d.value;if((!j(l,d)||d.type!==6)&&p("expected colon"),j(l,d)||p("expected value"),u=2,d.type===1){i[g]=d.value;continue}if(d.type===8){i[g]=null;continue}if(d.type===9){i[g]=!0;continue}if(d.type===10){i[g]=!1;continue}if(d.type===11){i[g]=parseFloat(d.value);continue}if(d.type===2){var L=[];i[g]=L,S(),u=4,i=L;continue}if(d.type===3){var v={};_&&(v.$vscodeTextmateLocation=d.toLocation(R)),i[g]=v,S(),u=1,i=v;continue}}p("unexpected token in dict")}if(u===5){if(d.type===4){k();continue}if(d.type===7){u=6;continue}p("expected , or ]")}if(u===4||u===6){if(u===4&&d.type===4){k();continue}if(u=5,d.type===1){i.push(d.value);continue}if(d.type===8){i.push(null);continue}if(d.type===9){i.push(!0);continue}if(d.type===10){i.push(!1);continue}if(d.type===11){i.push(parseFloat(d.value));continue}if(d.type===2){var L=[];i.push(L),S(),u=4,i=L;continue}if(d.type===3){var v={};_&&(v.$vscodeTextmateLocation=d.toLocation(R)),i.push(v),S(),u=1,i=v;continue}p("unexpected token in array")}p("unknown state")}return f.length!==0&&p("unclosed constructs"),i}ue.parse=I;var O=function(){function E(R){this.source=R,this.pos=0,this.len=R.length,this.line=1,this.char=0}return E}(),b=function(){function E(){this.value=null,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}return E.prototype.toLocation=function(R){return{filename:R,line:this.line,char:this.char}},E}();function j(E,R){R.value=null,R.type=0,R.offset=-1,R.len=-1,R.line=-1,R.char=-1;var _=E.source,l=E.pos,d=E.len,u=E.line,i=E.char,o;do{if(l>=d)return!1;if(o=_.charCodeAt(l),o===32||o===9||o===13){l++,i++;continue}if(o===10){l++,u++,i=0;continue}break}while(!0);if(R.offset=l,R.line=u,R.char=i,o===34){R.type=1,l++,i++;do{if(l>=d)return!1;if(o=_.charCodeAt(l),l++,i++,o===92){l++,i++;continue}if(o===34)break}while(!0);R.value=_.substring(R.offset+1,l-1).replace(/\\u([0-9A-Fa-f]{4})/g,function(f,S){return String.fromCodePoint(parseInt(S,16))}).replace(/\\(.)/g,function(f,S){switch(S){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";default:D(E,"invalid escape sequence")}})}else if(o===91)R.type=2,l++,i++;else if(o===123)R.type=3,l++,i++;else if(o===93)R.type=4,l++,i++;else if(o===125)R.type=5,l++,i++;else if(o===58)R.type=6,l++,i++;else if(o===44)R.type=7,l++,i++;else if(o===110){if(R.type=8,l++,i++,o=_.charCodeAt(l),o!==117||(l++,i++,o=_.charCodeAt(l),o!==108)||(l++,i++,o=_.charCodeAt(l),o!==108))return!1;l++,i++}else if(o===116){if(R.type=9,l++,i++,o=_.charCodeAt(l),o!==114||(l++,i++,o=_.charCodeAt(l),o!==117)||(l++,i++,o=_.charCodeAt(l),o!==101))return!1;l++,i++}else if(o===102){if(R.type=10,l++,i++,o=_.charCodeAt(l),o!==97||(l++,i++,o=_.charCodeAt(l),o!==108)||(l++,i++,o=_.charCodeAt(l),o!==115)||(l++,i++,o=_.charCodeAt(l),o!==101))return!1;l++,i++}else{R.type=11;do{if(l>=d)return!1;if(o=_.charCodeAt(l),o===46||o>=48&&o<=57||o===101||o===69||o===45||o===43){l++,i++;continue}break}while(!0)}return R.len=l-R.offset,R.value===null&&(R.value=_.substr(R.offset,R.len)),E.pos=l,E.line=u,E.char=i,!0}return ue}var Se;function Fe(){if(Se)return ie;Se=1,Object.defineProperty(ie,"__esModule",{value:!0});var D=Be(),I=Ie(),O=Ne();function b(E,R){return I.CAPTURE_METADATA?O.parse(E,R,!0):JSON.parse(E)}ie.parseJSONGrammar=b;function j(E,R){return I.CAPTURE_METADATA?D.parseWithLocation(E,R,"$vscodeTextmateLocation"):D.parse(E)}return ie.parsePLISTGrammar=j,ie}var X={},be;function $e(){if(be)return X;be=1,Object.defineProperty(X,"__esModule",{value:!0});var D=function(){function u(i,o,f,S,k,p){this.scope=i,this.parentScopes=o,this.index=f,this.fontStyle=S,this.foreground=k,this.background=p}return u}();X.ParsedThemeRule=D;function I(u){return!!(/^#[0-9a-f]{6}$/i.test(u)||/^#[0-9a-f]{8}$/i.test(u)||/^#[0-9a-f]{3}$/i.test(u)||/^#[0-9a-f]{4}$/i.test(u))}function O(u){if(!u)return[];if(!u.settings||!Array.isArray(u.settings))return[];for(var i=u.settings,o=[],f=0,S=0,k=i.length;S<k;S++){var p=i[S];if(p.settings){var g=void 0;if(typeof p.scope=="string"){var L=p.scope;L=L.replace(/^[,]+/,""),L=L.replace(/[,]+$/,""),g=L.split(",")}else Array.isArray(p.scope)?g=p.scope:g=[""];var v=-1;if(typeof p.settings.fontStyle=="string"){v=0;for(var t=p.settings.fontStyle.split(" "),a=0,h=t.length;a<h;a++){var y=t[a];switch(y){case"italic":v=v|1;break;case"bold":v=v|2;break;case"underline":v=v|4;break}}}var m=null;typeof p.settings.foreground=="string"&&I(p.settings.foreground)&&(m=p.settings.foreground);var G=null;typeof p.settings.background=="string"&&I(p.settings.background)&&(G=p.settings.background);for(var a=0,h=g.length;a<h;a++){var L=g[a].trim(),t=L.split(" "),x=t[t.length-1],B=null;t.length>1&&(B=t.slice(0,t.length-1),B.reverse()),o[f++]=new D(x,B,S,v,m,G)}}}return o}X.parseTheme=O;function b(u){u.sort(function(a,h){var y=R(a.scope,h.scope);return y!==0||(y=_(a.parentScopes,h.parentScopes),y!==0)?y:a.index-h.index});for(var i=0,o="#000000",f="#ffffff";u.length>=1&&u[0].scope==="";){var S=u.shift();S.fontStyle!==-1&&(i=S.fontStyle),S.foreground!==null&&(o=S.foreground),S.background!==null&&(f=S.background)}for(var k=new j,p=new l(0,null,i,k.getId(o),k.getId(f)),g=new d(new l(0,null,-1,0,0),[]),L=0,v=u.length;L<v;L++){var t=u[L];g.insert(0,t.scope,t.parentScopes,t.fontStyle,k.getId(t.foreground),k.getId(t.background))}return new E(k,p,g)}var j=function(){function u(){this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null)}return u.prototype.getId=function(i){if(i===null)return 0;i=i.toUpperCase();var o=this._color2id[i];return o||(o=++this._lastColorId,this._color2id[i]=o,this._id2color[o]=i,o)},u.prototype.getColorMap=function(){return this._id2color.slice(0)},u}();X.ColorMap=j;var E=function(){function u(i,o,f){this._colorMap=i,this._root=f,this._defaults=o,this._cache={}}return u.createFromRawTheme=function(i){return this.createFromParsedTheme(O(i))},u.createFromParsedTheme=function(i){return b(i)},u.prototype.getColorMap=function(){return this._colorMap.getColorMap()},u.prototype.getDefaults=function(){return this._defaults},u.prototype.match=function(i){return this._cache.hasOwnProperty(i)||(this._cache[i]=this._root.match(i)),this._cache[i]},u}();X.Theme=E;function R(u,i){return u<i?-1:u>i?1:0}X.strcmp=R;function _(u,i){if(u===null&&i===null)return 0;if(!u)return-1;if(!i)return 1;var o=u.length,f=i.length;if(o===f){for(var S=0;S<o;S++){var k=R(u[S],i[S]);if(k!==0)return k}return 0}return o-f}X.strArrCmp=_;var l=function(){function u(i,o,f,S,k){this.scopeDepth=i,this.parentScopes=o,this.fontStyle=f,this.foreground=S,this.background=k}return u.prototype.clone=function(){return new u(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)},u.cloneArr=function(i){for(var o=[],f=0,S=i.length;f<S;f++)o[f]=i[f].clone();return o},u.prototype.acceptOverwrite=function(i,o,f,S){this.scopeDepth>i?console.log("how did this happen?"):this.scopeDepth=i,o!==-1&&(this.fontStyle=o),f!==0&&(this.foreground=f),S!==0&&(this.background=S)},u}();X.ThemeTrieElementRule=l;var d=function(){function u(i,o,f){o===void 0&&(o=[]),f===void 0&&(f={}),this._mainRule=i,this._rulesWithParentScopes=o,this._children=f}return u._sortBySpecificity=function(i){return i.length===1||i.sort(this._cmpBySpecificity),i},u._cmpBySpecificity=function(i,o){if(i.scopeDepth===o.scopeDepth){var f=i.parentScopes,S=o.parentScopes,k=f===null?0:f.length,p=S===null?0:S.length;if(k===p)for(var g=0;g<k;g++){var L=f[g].length,v=S[g].length;if(L!==v)return v-L}return p-k}return o.scopeDepth-i.scopeDepth},u.prototype.match=function(i){if(i==="")return u._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));var o=i.indexOf("."),f,S;return o===-1?(f=i,S=""):(f=i.substring(0,o),S=i.substring(o+1)),this._children.hasOwnProperty(f)?this._children[f].match(S):u._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))},u.prototype.insert=function(i,o,f,S,k,p){if(o===""){this._doInsertHere(i,f,S,k,p);return}var g=o.indexOf("."),L,v;g===-1?(L=o,v=""):(L=o.substring(0,g),v=o.substring(g+1));var t;this._children.hasOwnProperty(L)?t=this._children[L]:(t=new u(this._mainRule.clone(),l.cloneArr(this._rulesWithParentScopes)),this._children[L]=t),t.insert(i+1,v,f,S,k,p)},u.prototype._doInsertHere=function(i,o,f,S,k){if(o===null){this._mainRule.acceptOverwrite(i,f,S,k);return}for(var p=0,g=this._rulesWithParentScopes.length;p<g;p++){var L=this._rulesWithParentScopes[p];if(_(L.parentScopes,o)===0){L.acceptOverwrite(i,f,S,k);return}}f===-1&&(f=this._mainRule.fontStyle),S===0&&(S=this._mainRule.foreground),k===0&&(k=this._mainRule.background),this._rulesWithParentScopes.push(new l(i,o,f,S,k))},u}();return X.ThemeTrieElement=d,X}var Ee;function Me(){if(Ee)return Q;Ee=1;var D=Q.__awaiter||function(l,d,u,i){return new(u||(u=Promise))(function(o,f){function S(g){try{p(i.next(g))}catch(L){f(L)}}function k(g){try{p(i.throw(g))}catch(L){f(L)}}function p(g){g.done?o(g.value):new u(function(L){L(g.value)}).then(S,k)}p((i=i.apply(l,d||[])).next())})},I=Q.__generator||function(l,d){var u={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},i,o,f,S;return S={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function k(g){return function(L){return p([g,L])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(f=g[0]&2?o.return:g[0]?o.throw||((f=o.return)&&f.call(o),0):o.next)&&!(f=f.call(o,g[1])).done)return f;switch(o=0,f&&(g=[g[0]&2,f.value]),g[0]){case 0:case 1:f=g;break;case 4:return u.label++,{value:g[1],done:!1};case 5:u.label++,o=g[1],g=[0];continue;case 7:g=u.ops.pop(),u.trys.pop();continue;default:if(f=u.trys,!(f=f.length>0&&f[f.length-1])&&(g[0]===6||g[0]===2)){u=0;continue}if(g[0]===3&&(!f||g[1]>f[0]&&g[1]<f[3])){u.label=g[1];break}if(g[0]===6&&u.label<f[1]){u.label=f[1],f=g;break}if(f&&u.label<f[2]){u.label=f[2],u.ops.push(g);break}f[2]&&u.ops.pop(),u.trys.pop();continue}g=d.call(l,u)}catch(L){g=[6,L],o=0}finally{i=f=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}};Object.defineProperty(Q,"__esModule",{value:!0});var O=De(),b=Fe(),j=$e(),E=ke(),R={getGrammarDefinition:function(l){return null},getInjections:function(l){return null}},_=function(){function l(d){d===void 0&&(d=R),this._locator=d,this._syncRegistry=new O.SyncRegistry(j.Theme.createFromRawTheme(d.theme)),this.installationQueue=new Map}return l.prototype.setTheme=function(d){this._syncRegistry.setTheme(j.Theme.createFromRawTheme(d))},l.prototype.getColorMap=function(){return this._syncRegistry.getColorMap()},l.prototype.loadGrammarWithEmbeddedLanguages=function(d,u,i){return this.loadGrammarWithConfiguration(d,u,{embeddedLanguages:i})},l.prototype.loadGrammarWithConfiguration=function(d,u,i){return D(this,void 0,void 0,function(){return I(this,function(o){switch(o.label){case 0:return[4,this._loadGrammar(d)];case 1:return o.sent(),[2,this.grammarForScopeName(d,u,i.embeddedLanguages,i.tokenTypes)]}})})},l.prototype.loadGrammar=function(d){return D(this,void 0,void 0,function(){return I(this,function(u){return[2,this._loadGrammar(d)]})})},l.prototype._loadGrammar=function(d,u){return u===void 0&&(u=null),D(this,void 0,void 0,function(){var i,o=this;return I(this,function(f){switch(f.label){case 0:return this._syncRegistry.lookup(d)?[2,this.grammarForScopeName(d)]:this.installationQueue.has(d)?[2,this.installationQueue.get(d)]:(i=new Promise(function(S,k){return D(o,void 0,void 0,function(){var p,g,L,v,t=this;return I(this,function(a){switch(a.label){case 0:return[4,this._locator.getGrammarDefinition(d,u)];case 1:if(p=a.sent(),!p)throw new Error("A tmGrammar load was requested but registry host failed to provide grammar definition");if(p.format!=="json"&&p.format!=="plist"||p.format==="json"&&typeof p.content!="object"&&typeof p.content!="string"||p.format==="plist"&&typeof p.content!="string")throw new TypeError('Grammar definition must be an object, either `{ content: string | object, format: "json" }` OR `{ content: string, format: "plist" }`)');return g=p.format==="json"?typeof p.content=="string"?b.parseJSONGrammar(p.content,"c://fakepath/grammar.json"):p.content:b.parsePLISTGrammar(p.content,"c://fakepath/grammar.plist"),L=typeof this._locator.getInjections=="function"&&this._locator.getInjections(d),g.scopeName=d,v=this._syncRegistry.addGrammar(g,L),[4,Promise.all(v.map(function(h){return D(t,void 0,void 0,function(){return I(this,function(y){try{return[2,this._loadGrammar(h,d)]}catch(m){throw new Error("While trying to load tmGrammar with scopeId: '"+d+"', it's dependency (scopeId: "+h+") loading errored: "+m.message)}return[2]})})}))];case 2:return a.sent(),S(this.grammarForScopeName(d)),[2]}})})}),this.installationQueue.set(d,i),[4,i]);case 1:return f.sent(),this.installationQueue.delete(d),[2,i]}})})},l.prototype.grammarForScopeName=function(d,u,i,o){return u===void 0&&(u=0),i===void 0&&(i=null),o===void 0&&(o=null),this._syncRegistry.grammarForScopeName(d,u,i,o)},l}();return Q.Registry=_,Q.INITIAL=E.StackElement.NULL,Q}var ae={},Ae;function qe(){if(Ae)return ae;Ae=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.TMToMonacoToken=void 0;const D=(I,O)=>{let b="";for(let j=O[0].length-1;j>=0;j-=1){const E=O[0][j];if(E===".")break;b=E+b}for(let j=O.length-1;j>=0;j-=1){const E=O[j];for(let R=E.length-1;R>=0;R-=1)if(E[R]==="."){const l=E.slice(0,R);if(I._themeService._theme._tokenTheme._match(l+"."+b)._foreground>1)return l+"."+b;if(I._themeService._theme._tokenTheme._match(l)._foreground>1)return l}}return""};return ae.TMToMonacoToken=D,ae}var we;function We(){if(we)return re;we=1,Object.defineProperty(re,"__esModule",{value:!0}),re.wireTmGrammars=void 0;const D=Me(),I=qe();class O{constructor(E){pe(this,"_ruleStack");this._ruleStack=E}get ruleStack(){return this._ruleStack}clone(){return new O(this._ruleStack)}equals(E){return!(!E||!(E instanceof O)||E!==this||E._ruleStack!==this._ruleStack)}}function b(j,E,R,_){return Promise.all(Array.from(R.keys()).map(async l=>{const d=await E.loadGrammar(R.get(l));j.languages.setTokensProvider(l,{getInitialState:()=>new O(D.INITIAL),tokenize:(u,i)=>{const o=d.tokenizeLine(u,i.ruleStack);return{endState:new O(o.ruleStack),tokens:o.tokens.map(f=>({...f,scopes:_?(0,I.TMToMonacoToken)(_,f.scopes):f.scopes[f.scopes.length-1]}))}}})}))}return re.wireTmGrammars=b,re}var Ue=We(),Je=Me();async function ze(D){switch(D){case"source.vue":return{format:"json",content:await te(()=>import("./vue.tmLanguage-I_axpwd2.js"),[])};case"source.ts":return{format:"json",content:await te(()=>import("./TypeScript.tmLanguage-CXzraoXu.js"),[])};case"source.js":return{format:"json",content:await te(()=>import("./JavaScript.tmLanguage-RsuwhEen.js"),[])};case"text.html.basic":return{format:"json",content:await te(()=>import("./html.tmLanguage-n_iceuEL.js"),[])};case"source.css":return{format:"json",content:await te(()=>import("./css.tmLanguage-BFnXLGBT.js"),[])};default:return{format:"json",content:{scopeName:"source",patterns:[]}}}}async function Xe(D,I){const O=new Je.Registry({getGrammarDefinition:async j=>{const E=await ze(j);return JSON.parse(JSON.stringify(E))}}),b=new Map;b.set("vue","source.vue"),b.set("javascript","source.js"),b.set("typescript","source.ts"),b.set("css","source.css"),b.set("html","text.html.basic");for(const j of b.keys())D.languages.register({id:j});await Ue.wireTmGrammars(D,O,b,I)}export{Xe as loadGrammars};
