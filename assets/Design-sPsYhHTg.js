import{S as Ve}from"./SectionRenderer-CyPD1j-_.js";import{S as ze,a as Ue,b as qe,c as Ge,d as Ze,e as Je,f as Qe,T as $e,M as xe,g as _e,h as et,i as tt,j as it,k as st,N as nt,s as M,l as L,m as Re}from"./index-DFEpREkX.js";import{l as at,a as rt,m as ot,S as lt,M as dt,A as ut,s as ht,j as Ae,H as Oe,_ as mt}from"./ast-CdZPRWZb.js";import{_ as B,e as V,o as u,c as v,a as o,r as k,b as I,w as H,n as y,d as w,f as Y,g as D,v as He,t as j,F as X,h as z,i as T,T as ft,l as vt,j as U,k as Fe,m as F,u as pt}from"./index-BiwHk5tq.js";import{g as yt}from"./compiler-CRGofMHN.js";import"./ModalProfileSubscriptionPricing-CRxf7_W6.js";const gt={inject:["fs","account","services"],data:()=>({content:"",mockup:null}),async mounted(){await this.getMockup(),this.load()},methods:{async getMockup(){var e,t,i;this.mockup=(t=(e=await this.services.manager.service("application_mockups").find({query:{application_id:this.account.project.data.id}}))==null?void 0:e.data)==null?void 0:t[0],this.account.project.mockup=((i=this.mockup)==null?void 0:i.code)||""},async save(){var e;this.mockup?this.mockup=await this.services.manager.service("application_mockups").patch(this.mockup.id,{code:this.content}):this.mockup=await this.services.manager.service("application_mockups").create({code:this.content}),this.account.project.mockup=((e=this.mockup)==null?void 0:e.code)||"",this.account.save(),alert("Mockup saved!"),this.$emit("changed")},async load(){const e=async t=>{var h;let n=((h=this.mockup)==null?void 0:h.code)||"export default (app) => {}";this.content=n;let r=V.getModel(this.account.project.data.id+".js");r?r.setValue(this.content):r=V.createModel(this.content,"typescript",this.account.project.data.id+".js");const s=V.create(this.$refs.editor,{theme:t,model:r,selectOnLineNumbers:!0,automaticLayout:!0,autoIndent:!0,wordWrapOverride1:"off","semanticHighlighting.enabled":!0}),d=s._themeService._theme;d.getTokenStyleMetadata=(l,m,S)=>{const f=m.includes("readonly");switch(l){case"function":case"method":return{foreground:12};case"class":return{foreground:11};case"variable":case"property":return{foreground:f?21:9};default:return{foreground:0}}},rt(ot,s),s.onDidChangeModelContent(()=>{this.content=s.getValue()})};at(V).then(t=>e(t.light))}}},ct={ref:"editor",class:"monaco-editor"};function wt(e,t,i,n,r,s){return u(),v("div",null,[o("button",{onClick:t[0]||(t[0]=(...d)=>s.save&&s.save(...d))},"Save"),o("div",ct,null,512)])}const kt=B(gt,[["render",wt],["__scopeId","data-v-27630429"]]),bt={props:["open","mobile"],inject:["account"],components:{ModalMockupContent:kt},data:()=>({mounted:!1,closing:!1}),async created(){this.fadeIn()},watch:{open(e){e&&this.fadeIn()}},computed:{premium(){var e,t,i;return(i=(t=(e=this.account)==null?void 0:e.subscriptions)==null?void 0:t.data)==null?void 0:i.length},admin(){var e;return(e=this.account.globalRoles)==null?void 0:e.includes("admin")}},methods:{emit(e){this.$emit("selection",e)},close(){this.closing=!0,setTimeout(()=>{this.closing=!1,this.$emit("close")},200)},fadeIn(){this.mounted=!1,setTimeout(()=>{this.mounted=!0})}}},Ct={class:"container authorized"},Nt={class:"header"},It={class:"content"};function St(e,t,i,n,r,s){const d=k("ModalMockupContent");return i.open?(u(),v("div",{key:0,class:y(["modal",{mounted:e.mounted,closing:e.closing}])},[o("div",{class:"wrapper",onClick:t[2]||(t[2]=H(()=>{},["stop","prevent"]))},[o("div",Ct,[o("div",Nt,[t[4]||(t[4]=o("h2",null,"Mockup",-1)),o("button",{class:"button close",onClick:t[0]||(t[0]=(...h)=>s.close&&s.close(...h))})]),o("div",It,[I(d,{onChanged:t[1]||(t[1]=h=>e.$emit("changed"))})])])]),o("div",{onClick:t[3]||(t[3]=(...h)=>s.close&&s.close(...h)),class:"outside"})],2)):w("",!0)}const Pt=B(bt,[["render",St],["__scopeId","data-v-b007371c"]]),jt={props:["firstNode","node","body","level","parent","parentNode","parentArray","dragHeight","dragX","dragY","dragLevel","dragIndex","dragNode","dragParentNode","index","vueFiles","paths","preventDeletion"],name:"router",data:()=>({moving:!1,relativeTop:0,relativeLeft:0,maxWidth:"100%",x:0,y:0,activeHeight:0,activeY:0,activeX:0,activeLevel:null,activeIndex:null,activeDragNode:null,activeDragParentNode:null,currX:0,currY:0,prevDragLevel:0,prevDragIndex:0,prevSubLevel:!1,pathName:"",nameName:"",transition:!1}),watch:{nameName(e){var t,i;if(e.indexOf(" ")!==-1){this.nameName=e.replaceAll(" ","");return}if(((t=this.node)==null?void 0:t.type)==="ObjectExpression"&&((i=this.node)!=null&&i.properties)){if(e){let n=this.node.properties.find(r=>{var s;return r.type!=="ObjectProperty"?!1:((s=r==null?void 0:r.key)==null?void 0:s.name)==="name"});n?n.value.value=e:(n={type:"ObjectProperty",computed:!1,method:!1,shorthand:!1,key:{type:"Identifier",name:"name"},value:{type:"StringLiteral",value:e,extra:{rawValue:e,raw:`'${e}'`}}},this.node.properties.push(n))}else this.node.properties=this.node.properties.filter(n=>{var r;return((r=n==null?void 0:n.key)==null?void 0:r.name)!=="name"});this.$emit("save")}},pathName(e){var i,n,r;if(e=e.toLowerCase(),e.startsWith("/")){this.pathName=e.replace("/","");return}if(e.indexOf(" ")!==-1){this.pathName=e.replaceAll(" ","-");return}const t=this.lvl<=1?"/"+e:e;if(t!==e){if(((i=this.node)==null?void 0:i.type)==="ArrayExpression")return;if(((n=this.node)==null?void 0:n.type)==="ObjectExpression"&&((r=this.node)!=null&&r.properties)){const s=this.node.properties.find(d=>{var h;return d.type!=="ObjectProperty"?!1:((h=d==null?void 0:d.key)==null?void 0:h.name)==="path"});s.value.value=t,this.$emit("save")}}},dragLevel(){this.dragLevel!==null&&this.dragLevel!==void 0&&(this.prevDragLevel=this.dragLevel)},dragIndex(){this.dragIndex!==null&&this.dragIndex!==void 0&&(this.prevDragIndex=this.dragIndex)},activeLevel(){this.activeLevel!==null&&(this.prevDragLevel=this.activeLevel)},activeHeight(e){e?setTimeout(()=>{this.transition=!0}):this.transition=!1},activeIndex(){this.activeIndex!==null&&(this.prevDragIndex=this.activeIndex)},dragY(){this.calcTop()},pull(e){const t=this.activeHeight||this.dragHeight;!e&&!t&&this.index!==void 0&&this.swap({dragIndex:this.prevDragIndex,dropIndex:this.index,subLevel:this.prevSubLevel})},subLevel(e){this.prevSubLevel=e}},computed:{props(){var e,t;return!!(((e=this.node)==null?void 0:e.type)==="ObjectExpression"&&((t=this.node)!=null&&t.properties)&&this.node.properties.some(i=>{var n,r;return((r=(n=i==null?void 0:i.key)==null?void 0:n.name)==null?void 0:r.toLowerCase())==="props"}))},pull(){if(this.moving)return!1;const e=this.activeHeight||this.dragHeight;return!(!e||this.currY<this.dragY-e/2||this.currY>this.dragY+e/2)},subLevel(){let e=this.activeDragParentNode||this.dragParentNode,t=(window.innerWidth-900)/2+50;return window.innerWidth<900&&(t=50),!this.pull||!this.index||this.index===1&&!(this.activeIndex||this.dragIndex)&&this.parentNode===e?!1:(this.activeX||this.dragX)-10-this.level*50>t},subRouterView(){var e;return((e=this.children)==null?void 0:e.length)&&this.componentPath&&this.routePath},lvl(){return!this.level&&this.level!==0?0:this.level+1},routeName(){var e,t,i,n,r;if(((e=this.node)==null?void 0:e.type)==="ArrayExpression")return"";if(((t=this.node)==null?void 0:t.type)==="ObjectExpression"&&((i=this.node)!=null&&i.properties)){const s=this.node.properties.find(h=>{var l;return h.type!=="ObjectProperty"?!1:((l=h==null?void 0:h.key)==null?void 0:l.name)==="name"});let d=(n=s==null?void 0:s.value)==null?void 0:n.value;return this.nameName!==d&&(this.nameName=d||""),(r=s==null?void 0:s.value)==null?void 0:r.value}return""},routePath(){var e,t,i,n,r;if(((e=this.node)==null?void 0:e.type)==="ArrayExpression")return"";if(((t=this.node)==null?void 0:t.type)==="ObjectExpression"&&((i=this.node)!=null&&i.properties)){const s=this.node.properties.find(h=>{var l;return h.type!=="ObjectProperty"?!1:((l=h==null?void 0:h.key)==null?void 0:l.name)==="path"});let d=(n=s==null?void 0:s.value)==null?void 0:n.value;return d!=null&&d.startsWith("/")&&(d=d.replace("/","")),this.pathName!==d&&(this.pathName=d||""),(r=s==null?void 0:s.value)==null?void 0:r.value}return""},routeRedirect(){var e,t,i,n;if(((e=this.node)==null?void 0:e.type)==="ArrayExpression")return"";if(((t=this.node)==null?void 0:t.type)==="ObjectExpression"&&((i=this.node)!=null&&i.properties)){const r=this.node.properties.find(s=>{var d;return s.type!=="ObjectProperty"?!1:((d=s==null?void 0:s.key)==null?void 0:d.name)==="redirect"});return(n=r==null?void 0:r.value)==null?void 0:n.value}return""},component(){var e,t,i;if(((e=this.node)==null?void 0:e.type)==="ArrayExpression")return"";if(((t=this.node)==null?void 0:t.type)==="ObjectExpression"&&((i=this.node)!=null&&i.properties)){const n=this.node.properties.find(r=>{var s;return r.type!=="ObjectProperty"?!1:((s=r==null?void 0:r.key)==null?void 0:s.name)==="component"});return n==null?void 0:n.value}return""},componentPath(){var e,t,i,n,r,s,d,h,l,m,S,f,E,R,A,b;if(((e=this.component)==null?void 0:e.type)==="Identifier"){for(const C of this.body)if(!(C.type!=="ImportDeclaration"||!C.specifiers.find(g=>{var p;return!((g==null?void 0:g.type)!=="ImportDefaultSpecifier"||((p=g==null?void 0:g.local)==null?void 0:p.name)!==this.component.name)})))return(t=C==null?void 0:C.source)==null?void 0:t.value}else if(((i=this.component)==null?void 0:i.type)==="ArrowFunctionExpression"&&((r=(n=this.component)==null?void 0:n.body)==null?void 0:r.type)==="CallExpression"&&((h=(d=(s=this.component)==null?void 0:s.body)==null?void 0:d.callee)==null?void 0:h.type)==="Import"&&((f=(S=(m=(l=this.component)==null?void 0:l.body)==null?void 0:m.arguments)==null?void 0:S[0])==null?void 0:f.type)==="StringLiteral")return(b=(A=(R=(E=this.component)==null?void 0:E.body)==null?void 0:R.arguments)==null?void 0:A[0])==null?void 0:b.value;return""},children(){var e,t,i,n;if(((e=this.node)==null?void 0:e.type)==="ArrayExpression")return this.node.elements||[];if(((t=this.node)==null?void 0:t.type)==="ObjectExpression"&&((i=this.node)!=null&&i.properties)){const r=this.node.properties.find(s=>{var d;return s.type!=="ObjectProperty"?!1:((d=s==null?void 0:s.key)==null?void 0:d.name)==="children"});return((n=r==null?void 0:r.value)==null?void 0:n.elements)||[]}return[]}},created(){document.body.addEventListener("touchmove",this.move),document.body.addEventListener("touchend",this.stop)},beforeUnmount(){document.body.removeEventListener("touchmove",this.move),document.body.removeEventListener("touchend",this.stop)},methods:{removeRoute(){const e=this.parentArray.indexOf(this.node);this.parentArray.splice(e,1),this.$emit("save")},addRoute(){const e=this.parentArray.indexOf(this.node),t={type:"ObjectExpression",properties:[{type:"ObjectProperty",computed:!1,method:!1,shorthand:!1,key:{type:"Identifier",name:"path"},value:{type:"StringLiteral",value:"",extra:{rawValue:"",raw:"''"}}},{type:"ObjectProperty",computed:!1,method:!1,shorthand:!1,key:{type:"Identifier",name:"component"},value:{async:!1,type:"ArrowFunctionExpression",params:[],id:null,generator:!1,body:{arguments:[{type:"StringLiteral",value:"",extra:{rawValue:"",raw:"''"}}],callee:{type:"Import"},type:"CallExpression"}}}]};this.parentArray.splice(e+1,0,t),this.$emit("save")},toggleProps(){var e,t;((e=this.node)==null?void 0:e.type)==="ObjectExpression"&&((t=this.node)!=null&&t.properties)&&(this.node.properties.some(i=>{var n,r;return((r=(n=i==null?void 0:i.key)==null?void 0:n.name)==null?void 0:r.toLowerCase())==="props"})?this.node.properties=this.node.properties.filter(i=>{var n,r;return((r=(n=i==null?void 0:i.key)==null?void 0:n.name)==null?void 0:r.toLowerCase())!=="props"}):this.node.properties.push({type:"ObjectProperty",computed:!1,method:!1,shorthand:!1,key:{type:"Identifier",name:"props"},value:{type:"BooleanLiteral",value:!0}}),this.$emit("save"))},toggleRedirect(){var e,t;((e=this.node)==null?void 0:e.type)==="ObjectExpression"&&((t=this.node)!=null&&t.properties)&&(this.node.properties.some(i=>{var n,r;return((r=(n=i==null?void 0:i.key)==null?void 0:n.name)==null?void 0:r.toLowerCase())==="component"})?(this.node.properties=this.node.properties.filter(i=>{var n,r;return((r=(n=i==null?void 0:i.key)==null?void 0:n.name)==null?void 0:r.toLowerCase())!=="component"}),this.updateRedirectPath()):(this.node.properties=this.node.properties.filter(i=>{var n,r;return((r=(n=i==null?void 0:i.key)==null?void 0:n.name)==null?void 0:r.toLowerCase())!=="redirect"}),this.updateComponentPath()))},updateRedirectPath(e=""){var t,i;((t=this.node)==null?void 0:t.type)==="ObjectExpression"&&((i=this.node)!=null&&i.properties)&&(this.node.properties=this.node.properties.filter(n=>{var r,s;return((s=(r=n==null?void 0:n.key)==null?void 0:r.name)==null?void 0:s.toLowerCase())!=="redirect"}),this.node.properties.push({type:"ObjectProperty",computed:!1,method:!1,shorthand:!1,key:{type:"Identifier",name:"redirect"},value:{type:"StringLiteral",value:e,extra:{rawValue:e,raw:`'${e}'`}}}),this.$emit("save"))},updateComponentPath(e=""){var t,i;((t=this.node)==null?void 0:t.type)==="ObjectExpression"&&((i=this.node)!=null&&i.properties)&&(this.node.properties=this.node.properties.filter(n=>{var r,s;return((s=(r=n==null?void 0:n.key)==null?void 0:r.name)==null?void 0:s.toLowerCase())!=="component"}),this.node.properties.push({type:"ObjectProperty",computed:!1,method:!1,shorthand:!1,key:{type:"Identifier",name:"component"},value:{async:!1,type:"ArrowFunctionExpression",params:[],id:null,generator:!1,body:{arguments:[{type:"StringLiteral",value:e,extra:{rawValue:e,raw:`'${e}'`}}],callee:{type:"Import"},type:"CallExpression"}}}),this.$emit("save"))},swap({dragIndex:e=this.prevDragIndex,dropIndex:t=this.index,subLevel:i=this.prevSubLevel}){var r,s,d,h,l,m,S,f,E,R,A;let n=this.activeDragParentNode||this.dragParentNode;if(n===this.parentNode&&!i){let b=(n==null?void 0:n.type)==="ArrayExpression"?n.elements:n.properties;(n==null?void 0:n.type)!=="ArrayExpression"&&(b=n.properties.find(p=>{var c;return p.type!=="ObjectProperty"?!1:((c=p==null?void 0:p.key)==null?void 0:c.name)==="children"}).value.elements);const C=b.splice(e,1)[0],P=e<t?t-1:t;b.splice(P,0,C)}else if(n===this.parentNode&&i){let b=n.elements;(n==null?void 0:n.type)!=="ArrayExpression"&&(b=n.properties.find(c=>{var N;return c.type!=="ObjectProperty"?!1:((N=c==null?void 0:c.key)==null?void 0:N.name)==="children"}).value.elements);const C=b.splice(e,1)[0],P=e<t?t-2:t-1;let g=b[P].properties.find(p=>{var c;return p.type!=="ObjectProperty"?!1:((c=p==null?void 0:p.key)==null?void 0:c.name)==="children"});g||(g={computed:!1,method:!1,shorthand:!1,type:"ObjectProperty",key:{type:"Identifier",name:"children"},value:{type:"ArrayExpression",elements:[]}},b[P].properties.push(g));for(const p of C.properties)p.key.name==="path"&&p.key.type==="Identifier"&&((s=(r=p==null?void 0:p.value)==null?void 0:r.value)!=null&&s.startsWith("/"))&&(p.value.value=p.value.value.replace("/",""));g.value.elements.push(C)}else if(i){let b=(n==null?void 0:n.type)==="ArrayExpression"?n.elements:n.properties;(n==null?void 0:n.type)!=="ArrayExpression"&&(b=n.properties.find(N=>{var O;return N.type!=="ObjectProperty"?!1:((O=N==null?void 0:N.key)==null?void 0:O.name)==="children"}).value.elements);const C=b.splice(e,1)[0];let P=this.parentNode.elements;((E=this.parentNode)==null?void 0:E.type)!=="ArrayExpression"&&(P=this.parentNode.properties.find(N=>{var O;return N.type!=="ObjectProperty"?!1:((O=N==null?void 0:N.key)==null?void 0:O.name)==="children"}).value.elements);const g=t-1;let p=P[g].properties.find(c=>{var N;return c.type!=="ObjectProperty"?!1:((N=c==null?void 0:c.key)==null?void 0:N.name)==="children"});p||(p={computed:!1,method:!1,shorthand:!1,type:"ObjectProperty",key:{type:"Identifier",name:"children"},value:{type:"ArrayExpression",elements:[]}},P[g].properties.push(p));for(const c of C.properties)c.key.name==="path"&&c.key.type==="Identifier"&&((A=(R=c==null?void 0:c.value)==null?void 0:R.value)!=null&&A.startsWith("/"))&&(c.value.value=c.value.value.replace("/",""));p.value.elements.push(C)}else{let b=(n==null?void 0:n.type)==="ArrayExpression"?n.elements:n.properties;(n==null?void 0:n.type)!=="ArrayExpression"&&(b=n.properties.find(p=>{var c;return p.type!=="ObjectProperty"?!1:((c=p==null?void 0:p.key)==null?void 0:c.name)==="children"}).value.elements);const C=b.splice(e,1)[0];let P=((d=this.parentNode)==null?void 0:d.type)==="ArrayExpression"?this.parentNode.elements:this.parentNode.properties;((h=this.parentNode)==null?void 0:h.type)!=="ArrayExpression"&&(P=this.parentNode.properties.find(p=>{var c;return p.type!=="ObjectProperty"?!1:((c=p==null?void 0:p.key)==null?void 0:c.name)==="children"}).value.elements);for(const g of C.properties)this.lvl>1&&g.key.name==="path"&&g.key.type==="Identifier"&&((m=(l=g==null?void 0:g.value)==null?void 0:l.value)!=null&&m.startsWith("/"))?g.value.value=g.value.value.replace("/",""):this.lvl<2&&g.key.name==="path"&&g.key.type==="Identifier"&&!((f=(S=g==null?void 0:g.value)==null?void 0:S.value)!=null&&f.startsWith("/"))&&(g.value.value="/"+g.value.value);P.splice(t,0,C)}this.$emit("save")},emitDragHeight(e){this.lvl?this.$emit("dragHeight",e):this.activeHeight=e},calcTop(){const e=this.$refs.curr.getBoundingClientRect();this.currY=e.top},start(e,t){this.moving=!0,this.x=e.screenX,this.y=e.screenY;const i=this.$refs.curr.getBoundingClientRect();this.relativeTop=e.screenY-i.top,this.relativeLeft=e.screenX-i.left+t,this.maxWidth=i.width+"px",i.height=68,this.activeHeight=i.height,this.activeX=i.left,this.activeY=i.top,this.activeLevel=this.lvl,this.activeIndex=this.index,this.activeDragNode=this.node,this.$emit("dragNode",this.node),this.$emit("dragParentNode",this.parentNode),this.$emit("dragLevel",this.lvl),this.$emit("dragIndex",this.index),this.$emit("dragHeight",i.height),this.$emit("dragX",i.left),this.$emit("dragY",i.top)},move(e){var i,n,r,s;if(!this.moving)return;this.x=((n=(i=e.touches)==null?void 0:i[0])==null?void 0:n.screenX)||e.screenX,this.y=((s=(r=e.touches)==null?void 0:r[0])==null?void 0:s.screenY)||e.screenY;const t=this.$refs.curr.getBoundingClientRect();this.activeX=t.left,this.activeY=t.top,this.$emit("dragX",t.left),this.$emit("dragY",t.top)},stop(){this.moving&&(this.moving=!1,this.x=0,this.y=0,this.maxWidth="100%",this.activeHeight=0,this.activeX=0,this.activeY=0,this.activeLevel=null,this.activeIndex=null,this.$emit("dragLevel",null),this.$emit("dragIndex",null),this.$emit("dragHeight",0),this.$emit("dragX",this.x),this.$emit("dragY",this.y))}}},Tt={key:1,class:"route-wrapper"},Mt=["title"],Lt={class:"wrap-3col"},Dt=["title"],Et={class:"wrap-3col"},Rt=["title"],At={class:"wrap-3col"},Ot=["value"],Ht=["value"],Ft=["title"],Wt={key:1};function Kt(e,t,i,n,r,s){var h,l;const d=k("router");return u(),v("div",{class:y({moving:e.transition}),style:Y({paddingBottom:e.activeHeight&&!s.lvl?"calc(74px + 15px + 100px)":s.lvl?0:"100px"})},[((h=i.node)==null?void 0:h.type)==="ObjectExpression"?(u(),v("div",{key:0,ref:"curr",style:Y({paddingTop:s.pull?(e.activeHeight||i.dragHeight)+15+"px":0,marginLeft:i.level?"50px":0,position:e.moving?"fixed":"relative",left:e.moving?e.x-e.relativeLeft+"px":0,top:e.moving?e.y-e.relativeTop+"px":0,width:"calc(100% - "+(i.level?50:0)+"px)",maxWidth:e.maxWidth,"z-index":e.moving?1e3:"auto"}),class:y([{"sub-router-view":s.subRouterView,isMoving:e.moving},"route-wrapper-parent"])},[s.pull?(u(),v("div",{key:0,style:Y({height:(e.activeHeight||i.dragHeight)+"px"}),class:y([{subLevel:s.subLevel},"route-wrapper-shadow"])},null,6)):w("",!0),i.node.fake?w("",!0):(u(),v("div",Tt,[o("div",{class:"dragger",onPointerdown:t[0]||(t[0]=H(m=>s.start(m,i.level*50),["stop"]))},null,32),o("div",{class:y(["propler",{active:s.props}]),title:s.props?"Disable props inheritance":"Inherit props",onClick:t[1]||(t[1]=(...m)=>s.toggleProps&&s.toggleProps(...m))},null,10,Mt),o("div",Lt,[t[28]||(t[28]=o("label",null,"Path",-1)),D(o("input",{placeholder:"/",title:s.routePath,"onUpdate:modelValue":t[2]||(t[2]=m=>e.pathName=m)},null,8,Dt),[[He,e.pathName]])]),o("div",Et,[t[29]||(t[29]=o("label",null,"Name",-1)),D(o("input",{placeholder:"name",title:s.routeName,"onUpdate:modelValue":t[3]||(t[3]=m=>e.nameName=m)},null,8,Rt),[[He,e.nameName]])]),o("div",At,[o("label",null,j(s.component?"Component":"Redirect"),1),s.component?(u(),v("select",{key:0,value:s.componentPath,onChange:t[4]||(t[4]=m=>s.updateComponentPath(m.target.value))},[(u(!0),v(X,null,z(i.vueFiles,m=>(u(),v("option",null,j(m),1))),256))],40,Ot)):(u(),v("select",{key:1,value:s.routeRedirect,onChange:t[5]||(t[5]=m=>s.updateRedirectPath(m.target.value))},[(u(!0),v(X,null,z((l=i.paths)==null?void 0:l.filter(m=>m&&m!==e.nameName&&m!==e.pathName),m=>(u(),v("option",null,j(m),1))),256))],40,Ht))]),o("div",{class:y(["toggler",{redirect:!s.component}]),title:s.component?"Switch to redirect":"Switch to component",onClick:t[6]||(t[6]=(...m)=>s.toggleRedirect&&s.toggleRedirect(...m))},null,10,Ft),o("div",{class:y(["remover",{disabled:i.preventDeletion}]),title:"Remove route",onClick:t[7]||(t[7]=m=>i.preventDeletion?"":s.removeRoute())},null,2),o("div",{class:"addler",title:"Add route",onClick:t[8]||(t[8]=(...m)=>s.addRoute&&s.addRoute(...m))})])),(u(!0),v(X,null,z(s.children,(m,S)=>(u(),T(d,{index:S,parentArray:s.children,parentNode:i.node,firstNode:i.firstNode,node:m,body:i.body,vueFiles:i.vueFiles,paths:i.paths,level:s.lvl,parent:s.routePath+(s.lvl>0?"/":""),dragHeight:e.activeHeight||i.dragHeight,dragX:e.activeX||i.dragX,dragY:e.activeY||i.dragY,dragLevel:e.activeLevel!==null?e.activeLevel:i.dragLevel,dragIndex:e.activeIndex!==null?e.activeIndex:i.dragIndex,dragNode:e.activeDragNode||i.dragNode,dragParentNode:e.activeDragParentNode||i.dragParentNode,onDragHeight:s.emitDragHeight,onDragX:t[9]||(t[9]=f=>s.lvl?e.$emit("dragX",f):e.activeX=f),onDragY:t[10]||(t[10]=f=>s.lvl?e.$emit("dragY",f):e.activeY=f),onDragLevel:t[11]||(t[11]=f=>s.lvl?e.$emit("dragLevel",f):e.activeLevel=f),onDragIndex:t[12]||(t[12]=f=>s.lvl?e.$emit("dragIndex",f):e.activeIndex=f),onDragNode:t[13]||(t[13]=f=>s.lvl?e.$emit("dragNode",f):e.activeDragNode=f),onDragParentNode:t[14]||(t[14]=f=>s.lvl?e.$emit("dragParentNode",f):e.activeDragParentNode=f),onSave:t[15]||(t[15]=f=>e.$emit("save"))},null,8,["index","parentArray","parentNode","firstNode","node","body","vueFiles","paths","level","parent","dragHeight","dragX","dragY","dragLevel","dragIndex","dragNode","dragParentNode","onDragHeight"]))),256)),s.children.length?(u(),T(d,{key:2,index:s.children.length,parentArray:s.children,parentNode:i.node,firstNode:i.firstNode,node:{type:"ObjectExpression",fake:!0},body:i.body,vueFiles:i.vueFiles,paths:i.paths,level:s.lvl,parent:s.routePath+(s.lvl>0?"/":""),dragHeight:e.activeHeight||i.dragHeight,dragX:e.activeX||i.dragX,dragY:e.activeY||i.dragY,dragLevel:e.activeLevel!==null?e.activeLevel:i.dragLevel,dragIndex:e.activeIndex!==null?e.activeIndex:i.dragIndex,dragNode:e.activeDragNode||i.dragNode,dragParentNode:e.activeDragParentNode||i.dragParentNode,onSave:t[16]||(t[16]=m=>e.$emit("save")),style:{"margin-bottom":"20px"}},null,8,["index","parentArray","parentNode","firstNode","body","vueFiles","paths","level","parent","dragHeight","dragX","dragY","dragLevel","dragIndex","dragNode","dragParentNode"])):w("",!0)],6)):(u(),v(X,{key:1},[(u(!0),v(X,null,z(s.children,(m,S)=>(u(),T(d,{preventDeletion:s.children.length===1,index:S,firstNode:i.firstNode,parentArray:s.children,parentNode:i.node,node:m,body:i.body,vueFiles:i.vueFiles,paths:i.paths,level:s.lvl,parent:s.routePath+(s.lvl>0?"/":""),dragHeight:e.activeHeight||i.dragHeight,dragX:e.activeX||i.dragX,dragY:e.activeY||i.dragY,dragLevel:e.activeLevel!==null?e.activeLevel:i.dragLevel,dragIndex:e.activeIndex!==null?e.activeIndex:i.dragIndex,dragNode:e.activeDragNode||i.dragNode,dragParentNode:e.activeDragParentNode||i.dragParentNode,onDragHeight:s.emitDragHeight,onDragX:t[17]||(t[17]=f=>s.lvl?e.$emit("dragX",f):e.activeX=f),onDragY:t[18]||(t[18]=f=>s.lvl?e.$emit("dragY",f):e.activeY=f),onDragLevel:t[19]||(t[19]=f=>s.lvl?e.$emit("dragLevel",f):e.activeLevel=f),onDragIndex:t[20]||(t[20]=f=>s.lvl?e.$emit("dragIndex",f):e.activeIndex=f),onDragNode:t[21]||(t[21]=f=>s.lvl?e.$emit("dragNode",f):e.activeDragNode=f),onDragParentNode:t[22]||(t[22]=f=>s.lvl?e.$emit("dragParentNode",f):e.activeDragParentNode=f),onSave:t[23]||(t[23]=f=>e.$emit("save"))},null,8,["preventDeletion","index","firstNode","parentArray","parentNode","node","body","vueFiles","paths","level","parent","dragHeight","dragX","dragY","dragLevel","dragIndex","dragNode","dragParentNode","onDragHeight"]))),256)),s.children.length?(u(),T(d,{key:0,index:s.children.length,firstNode:i.firstNode,parentArray:s.children,parentNode:i.node,node:{type:"ObjectExpression",fake:!0},body:i.body,vueFiles:i.vueFiles,paths:i.paths,level:s.lvl,parent:s.routePath+(s.lvl>0?"/":""),dragHeight:e.activeHeight||i.dragHeight,dragX:e.activeX||i.dragX,dragY:e.activeY||i.dragY,dragLevel:e.activeLevel!==null?e.activeLevel:i.dragLevel,dragIndex:e.activeIndex!==null?e.activeIndex:i.dragIndex,dragNode:e.activeDragNode||i.dragNode,dragParentNode:e.activeDragParentNode||i.dragParentNode,onSave:t[24]||(t[24]=m=>e.$emit("save"))},null,8,["index","firstNode","parentArray","parentNode","body","vueFiles","paths","level","parent","dragHeight","dragX","dragY","dragLevel","dragIndex","dragNode","dragParentNode"])):w("",!0),s.children.length?w("",!0):(u(),v("div",Wt," The route editor requires at least one route to hook into the routing system. "))],64)),(u(),T(ft,{to:"body"},[e.moving?(u(),v("div",{key:0,class:"cover",onPointermove:t[25]||(t[25]=H((...m)=>s.move&&s.move(...m),["stop"])),onPointerup:t[26]||(t[26]=(...m)=>s.stop&&s.stop(...m)),onPointerleave:t[27]||(t[27]=(...m)=>s.stop&&s.stop(...m))},null,32)):w("",!0)]))],6)}const Xt=B(jt,[["render",Kt],["__scopeId","data-v-03060e9b"]]),Yt={props:["open","mobile","mappings"],inject:["packer","fs"],components:{Route:Xt},data:()=>({mounted:!1,closing:!1,ast:null,routerNode:null,updated:!1,vueFiles:[],paths:[],names:[]}),async created(){this.fadeIn()},watch:{open(e){e&&this.fadeIn()}},computed:{body(){var e,t;return((t=(e=this.ast)==null?void 0:e.program)==null?void 0:t.body)||[]}},methods:{search(e=null,t=null,i=this.body,n=""){var r,s,d,h;t||(this.routerNode=null,this.paths=[],this.names=[]),Array.isArray(i)||(i=[i]);for(const l of i)l.type==="BlockStatement"?this.search(t,l,[...l.body,...l.directives],n):l.type==="VariableDeclaration"?this.search(t,l,(l==null?void 0:l.declarations)||[],n):l.type==="VariableDeclarator"?this.search(t,l,(l==null?void 0:l.init)||[],n):l.type==="ObjectMethod"?this.search(t,l,(l==null?void 0:l.body)||[],n):l.type==="ArrayExpression"?this.search(t,l,(l==null?void 0:l.elements)||[],n):l.type==="ObjectExpression"?this.search(t,l,(l==null?void 0:l.properties)||[],n):l.type==="ObjectProperty"?((r=l.key)==null||r.name,((s=l.key)==null?void 0:s.name)==="path"&&(this.routerNode||(this.routerNode=e),n=n?n+"/"+l.value.value:l.value.value,this.paths.includes(n)||this.paths.push(n)),((d=l.key)==null?void 0:d.name)==="name"&&(this.names.includes(l.value.value)||this.names.push(l.value.value)),(h=l.key)==null||h.name,this.search(t,l,(l==null?void 0:l.value)||[],n)):l.type==="ExportDefaultDeclaration"?this.search(t,l,(l==null?void 0:l.declaration)||[],n):l.type==="CallExpression"?(l.callee.name,this.search(t,l,(l==null?void 0:l.arguments)||[],n)):l.type==="ImportDeclaration"&&this.search(t,l,(l==null?void 0:l.specifiers)||[],n)},emit(e){this.$emit("selection",e)},close(){this.updated&&this.$emit("changed"),this.closing=!0,setTimeout(()=>{this.closing=!1,this.$emit("close")},200)},async fadeIn(){this.mounted=!1,await this.parse(),setTimeout(()=>{this.mounted=!0})},async save(){try{const e=yt(this.ast,{minified:!1}).code,t=await this.packer.list("/src"),i=t.find(n=>["router.js","router.ts","router.mjs","router/index.js","router/index.ts","router/index.mjs"].some(r=>n.endsWith(r)));this.vueFiles=t.filter(n=>n.toLowerCase().endsWith(".vue")).map(n=>n.replace("src/","@/")),i&&(await this.fs.writeFile("/"+i,e,{encoding:"utf8"}),this.updated=!0),this.search()}catch(e){console.log("error stringify routes",e)}},async parse(){try{const e=await this.packer.list("/src"),t=e.find(i=>["router.js","router.ts","router.mjs","router/index.js","router/index.ts","router/index.mjs"].some(n=>i.endsWith(n)));if(this.vueFiles=e.filter(i=>i.toLowerCase().endsWith(".vue")).map(i=>i.replace("src/","@/")),this.ast=null,t){let i=await this.fs.readFile("/"+t,{encoding:"utf8"});this.ast=vt.parse(i,{sourceType:"module"}),this.search()}}catch(e){console.log("error parsing routes",e)}}}},Bt={class:"container authorized"},Vt={class:"header"},zt={class:"content"};function Ut(e,t,i,n,r,s){const d=k("Route");return i.open?(u(),v("div",{key:0,class:y(["modal",{mounted:e.mounted,closing:e.closing}])},[o("div",{class:"wrapper",onClick:t[1]||(t[1]=H(()=>{},["stop","prevent"]))},[o("div",Bt,[o("div",Vt,[t[3]||(t[3]=o("h2",null,"Routes",-1)),o("button",{class:"button close",onClick:t[0]||(t[0]=(...h)=>s.close&&s.close(...h))})]),o("div",zt,[I(d,{node:e.routerNode,firstNode:e.routerNode,body:s.body,vueFiles:e.vueFiles,paths:[...e.names,...e.paths],onSave:s.save},null,8,["node","firstNode","body","vueFiles","paths","onSave"])])])]),o("div",{onClick:t[2]||(t[2]=(...h)=>s.close&&s.close(...h)),class:"outside"})],2)):w("",!0)}const qt=B(Yt,[["render",Ut],["__scopeId","data-v-90eff0ac"]]),Gt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20xml:space='preserve'%3e%3cpath%20d='m25.2%2020.9-.7-.7%203.5-3.5-4.2-4.2-.7.7c-1.2%201.2-3.1%201.2-4.2%200-1.2-1.2-1.2-3.1%200-4.2l.7-.7L15.3%204l-3.5%203.5-.7-.7C9.9%205.6%208%205.6%206.8%206.8s-1.2%203.1%200%204.2l.7.7L4%2015.3l4.2%204.2.7-.7c1.2-1.2%203.1-1.2%204.2%200%201.2%201.2%201.2%203.1%200%204.2l-.7.7%204.2%204.2%203.5-3.5.7.7c1.2%201.2%203.1%201.2%204.2%200%201.4-1.1%201.4-3%20.2-4.2'%20style='fill:none;stroke:%23000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10'/%3e%3c/svg%3e",Zt="data:image/svg+xml,%3csvg%20width='800'%20height='800'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23fff'%20fill-opacity='.01'%20d='M0%200h48v48H0z'/%3e%3crect%20x='4'%20y='4'%20width='40'%20height='40'%20rx='3'%20stroke='%23000'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M4%2017.333h40M17.333%2044V17.333'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Jt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20xml:space='preserve'%3e%3cpath%20d='M397.496%200C334.264%200%20283%2051.528%20282.992%20115.096c0%2046.328%2027.296%2086.16%2066.552%20104.408%208.392%2028.984%2022.56%2061.296%2032.008%2081.496v103.104h-220.88c.608-1.976%201.232-3.952%201.792-5.904C201.712%20379.944%20229%20340.12%20229%20293.792c0-63.568-51.264-115.096-114.504-115.096C51.264%20178.696%200%20230.224%200%20293.792c0%2046.328%2027.296%2086.16%2066.552%20104.408%2012.408%2042.904%2037.528%2093.208%2041.192%20100.504L114.496%20512l6.72-13.288c2.624-5.152%2016.064-32.064%2028.088-62.6H413.56V300.768c9.464-20.208%2023.552-52.384%2031.904-81.264C484.712%20201.248%20512%20161.424%20512%20115.096%20512%2051.528%20460.736%200%20397.496%200M114.504%20332.032c-21.016%200-38.048-17.12-38.048-38.248s17.032-38.248%2038.048-38.248%2038.048%2017.12%2038.048%2038.248-17.032%2038.248-38.048%2038.248m283-178.688c-21.016%200-38.048-17.128-38.048-38.248%200-21.128%2017.032-38.248%2038.048-38.248s38.048%2017.128%2038.048%2038.248-17.04%2038.248-38.048%2038.248'/%3e%3c/svg%3e",q={props:["doc"],inject:["services","fs","account","packer","compiler","broadcaster","pkg","gitserver"],provide(){return{darkmode:U(()=>this.darkmode),group:U(()=>this.group),breakpoint:U(()=>this.breakpoint==="xl2"?"2xl":this.breakpoint==="mi"?"xs":this.breakpoint),theme:U(()=>this.darkmode?"dark":"light")}},components:{SectionRenderer:Ve,SectionTree:ze,SectionStyles:Ue,SectionVue:qe,SectionFiles:lt,SectionRoutes:Ge,SectionDeploy:Ze,SectionTimeline:Je,SectionBreadcrumb:Qe,Transform:$e,ModalEditor:dt,ModalMockup:Pt,ModalMenu:xe,ModalProfile:_e,ModalElements:et,ModalStylesheets:tt,ModalRules:it,ModalKeyframes:st,ModalRoutes:qt,Navigator:nt},data:()=>({updateRoutes:!1,addCreate:!1,refreshContent:0,refreshContentBackwards:0,group:null,breakpoint:null,darkmode:!1,componentRouteMappings:[],lockBroadcast:!1,editorWindow:null,editorWindows:[],route:"/",modified:!1,timeline:!1,keyframesName:"",keyframesTimeline:null,previewWindows:[],code:null,before:null,after:null,inside:null,storingonline:!1,moving:null,insert:null,mockup:!1,mainMenu:!1,profile:!1,routerOverlay:localStorage.getItem("routerOverlay")!==null?localStorage.getItem("routerOverlay")==="true":!1,showTransform:!0,showPosition:!1,alwaysMount:!1,helper:!0,events:!1,renderKey:0,fsItem:null,fsItemTitle:"",mobile:!1,navigator:!0,menu:!0,width:0,layers:"files",layerStyle:null,layerRule:null,layerKeyframe:null,stylesheets:!1,rules:!1,keyframes:!1,storing:!1,selected:null,selectedParent:null,selectedType:null,ast:new ut,tempId:null,server:ht,widthNavmenu:localStorage.getItem("widthNavmenu")||250,widthSidemenu:localStorage.getItem("widthSidemenu")||250,dragNavigator:!1,dragSidemenu:!1,landscape:!1,undoCount:0,redoCount:0,historyLock:!1,syncing:!1,loadingSync:!1}),computed:{admin(){var e;return console.log("acc",this.account),(e=this.account.globalRoles)==null?void 0:e.includes("admin")},premium(){var e,t,i;return(i=(t=(e=this.account)==null?void 0:e.subscriptions)==null?void 0:t.data)==null?void 0:i.length},emptyProject(){var e;return!this.fsItem||!((e=this.account.project.data)!=null&&e.id)},bottomTabsHeight(){return"42px"},navmenu(){return this.navigator?this.mobile?"100%":this.widthNavmenu+"px":"0px"},sidemenu(){return this.menu?this.mobile?"100%":this.widthSidemenu+"px":"0px"},activeMenu(){return this.navmenu!=="0px"||this.sidemenu!=="0px"},breadcrumbBottom(){return this.timeline?"142px":"42px"},editorsTopMobile(){const e=this.timeline?this.activeMenu?"calc(30% - 50px)":"50px":this.activeMenu?"calc(30% + 50px)":"50px";return this.landscape?"50px":e},transformToolsHeight(){return this.timeline?"calc(100% - 92px - 100px - 42px - 40px)":"calc(100% - 92px - 42px - 40px)"},transformToolsHeightMobile(){return this.timeline?this.activeMenu?"calc(30% - 100px - 42px - 40px)":"calc(100vh - 92px - 100px - 42px - 40px)":this.activeMenu?"calc(30% - 42px - 40px)":"calc(100vh - 92px - 42px - 40px)"},mobileMenuHeight(){return this.landscape?"100%":"70%"}},watch:{ast:{handler(){this.sendToWindow(this.editorWindow)},deep:!0},routerOverlay(){localStorage.setItem("routerOverlay",this.routerOverlay)},async"account.project.data.id"(){var e,t;this.route="/",this.undoCount=0,this.redoCount=0,await M("undoHistory",{}),await M("redoHistory",{}),this.modified=await this.packer.gitModified(),this.fsItem=null,((t=(e=this.account.project)==null?void 0:e.data)==null?void 0:t.type)==="vue-sfc"?this.layers="component":this.layers="files",this.account.filepath&&await this.resetFSItem()},"account.main"(e){this.ast.parse(e)},async"account.user.id"(e){this.account.filepath&&await this.resetFSItem()},async"account.filepath"(e){var t;e!==((t=this.fsItem)==null?void 0:t.path)&&await this.resetFSItem()},async fsItem(e,t){var r,s,d,h;if(e!=null&&e.path.endsWith(".vue")){this.selected=null,this.selectedType=null,this.getNavTitle(),this.account.filepath=e.path;try{this.account.main=await this.fs.readFile(e.path,{encoding:"utf8"}),((s=(r=this.account.project)==null?void 0:r.data)==null?void 0:s.type)==="vue-sfc"&&(this.layers="component")}catch{this.account.main=""}}const i=await L("undoHistory"),n=await L("redoHistory");this.undoCount=((d=i==null?void 0:i[e==null?void 0:e.path])==null?void 0:d.length)||0,this.redoCount=((h=n==null?void 0:n[e==null?void 0:e.path])==null?void 0:h.length)||0,this.modified=await this.packer.gitModified()},async selected(e){var t;this.getNavTitle(),(e==null?void 0:e.type)==="keyframes"?(this.keyframesTimeline||(this.timeline=!0),this.keyframesName=e.name,this.keyframesTimeline=e.keyframes):(e==null?void 0:e.type)==="keyframe"?(this.keyframesTimeline||(this.timeline=!0),this.keyframesName=((t=e==null?void 0:e.parent)==null?void 0:t.name)||"?",this.keyframesTimeline=this.selectedParent):(this.keyframesName="",this.keyframesTimeline=null,this.timeline=!1)}},async created(){var t;if(window.addEventListener("beforeunload",this.handleBeforeUnload),document.addEventListener("logout",this.logoutListener),document.addEventListener("keydown",async i=>{i.key==="s"&&(navigator.userAgent.indexOf("Mac")!==-1?i.metaKey:i.ctrlKey)&&(i.preventDefault(),await this.store())},!1),this.broadcaster.onmessage=async i=>{var n,r,s,d,h,l,m;if(!((n=i.data)!=null&&n.id)!==((d=(s=(r=this.account)==null?void 0:r.project)==null?void 0:s.data)==null?void 0:d.id)&&(i.data.reload&&await this.reload(!1),(h=this.fsItem)!=null&&h.path.endsWith(".vue")&&((l=this.fsItem)==null?void 0:l.path)===((m=i.data)==null?void 0:m.path)))try{this.account.main=await this.fs.readFile(this.fsItem.path,{encoding:"utf8"})}catch(S){console.log(S)}},this.ast.listen(async i=>{i&&(i!=null&&i.attrs)&&(this.selected=i),await this.save()}),this.account.filepath&&this.account.filepath!==((t=this.fsItem)==null?void 0:t.path)){let i=this.account.filepath.split("/");try{let n=await this.fs.stat(this.account.filepath);this.fsItem={title:i[i.length-1],path:this.account.filepath,...n}}catch{this.fsItem=null}}const e={};onkeydown=onkeyup=async i=>{["INPUT","TEXTAREA"].includes(i.target.nodeName.toUpperCase())||(i.type==="keydown"&&(i.key.toLowerCase()==="meta"||i.key.toLowerCase()==="control")?e.meta=!0:i.type==="keyup"&&(i.key.toLowerCase()==="meta"||i.key.toLowerCase()==="control")?e.meta=!1:i.type==="keydown"&&i.key.toLowerCase()==="z"?e.z=!0:i.type==="keyup"&&i.key.toLowerCase()==="z"?e.z=!1:i.type==="keydown"&&i.key.toLowerCase()==="shift"?e.shift=!0:i.type==="keyup"&&i.key.toLowerCase()==="shift"&&(e.shift=!1),i.key.toLowerCase()==="z"&&(i.preventDefault(),e.meta&&e.shift&&e.z?await this.redo():e.meta&&e.z&&await this.undo()))}},beforeUnmount(){document.removeEventListener("logout",this.logoutListener)},async mounted(){this.darkmode=window.matchMedia("(prefers-color-scheme: dark)").matches,this.isMobile(),this.navigator=!this.mobile,this.menu=!this.mobile,window.addEventListener("resize",()=>this.isMobile()),this.ast.parse(this.account.main)},destroyed(){window.removeEventListener("beforeunload",this.handleBeforeUnload)},methods:{async addFile(e="component"){const t=prompt(`New ${e}`,`${e}.vue`);if(t)try{const i=`
          <template></template>
          <script>
            export default {
              data: () => ({})
            }
          <\/script>
          <style scoped></style>
        `;try{await this.fs.mkdir(`/src/${e}s`)}catch{}await this.fs.writeFile(`/src/${e}s/${t}`,i.trim(),{encoding:"utf8"}),this.renderKey++,this.setFSItem(`/src/${e}s/${t}`)}catch(i){alert(i.message)}},async setFSItem(e){let t=e.split("/");try{let i=await this.fs.stat(e);this.fsItem={title:t[t.length-1],path:e,...i},this.$nextTick(()=>{this.sendToWindow(this.editorWindow)})}catch(i){console.log(`Could not set file system item: ${i.message}`),this.fsItem=null}},async resetFSItem(){let e=this.account.filepath.split("/");try{let t=await this.fs.stat(this.account.filepath);this.fsItem={title:e[e.length-1],path:this.account.filepath,...t},this.$nextTick(()=>{this.sendToWindow(this.editorWindow)})}catch(t){console.log(`Could not reset file system item: ${t.message}`),this.fsItem=null}},logoutListener(){this.handleBeforeUnload(),this.profile=null},handleBeforeUnload(){var e;if(this.editorWindow&&this.editorWindow.close(),(e=this.editors)!=null&&e.length){for(const t of this.editorWindows)t.closed||t.close();this.editorWindows=[]}},async sync(e="web"){this.loadingSync=!0,await this.fs.sync(e),this.fs.watch(async()=>{await this.reload()}),this.syncing=!0,this.loadingSync=!1},syncOff(){this.fs.syncOff(),this.syncing=!1,this.loadingSync=!1},async redo(){var r;const e=await L("undoHistory"),t=await L("redoHistory");let i=this.fsItem;if(!i||!i.title.includes(".vue")||!((r=t[i.path])!=null&&r.length))return;let n=t[i.path][t[i.path].length-1];t[i.path].pop(),e[i.path]||(e[i.path]=[]),e[i.path].push(this.ast.stringify()),this.undoCount=e==null?void 0:e[i.path].length,this.redoCount=t==null?void 0:t[i.path].length,await M("undoHistory",e),await M("redoHistory",t),await this.save(n,!1),this.account.main=n,this.ast.parse(n)},async undo(){var r;const e=await L("undoHistory"),t=await L("redoHistory");let i=this.fsItem;if(!i||!i.title.includes(".vue")||!((r=e[i.path])!=null&&r.length))return;let n=e[i.path][e[i.path].length-1];e[i.path].pop(),t[i.path]||(t[i.path]=[]),t[i.path].push(this.ast.stringify()),this.undoCount=e==null?void 0:e[i.path].length,this.redoCount=t==null?void 0:t[i.path].length,await M("undoHistory",e),await M("redoHistory",t),await this.save(n,!1),this.account.main=n,this.ast.parse(n)},fixFontImport(e){this.ast.addGoogleFont(e)},draggingNavigator(e){var i;let t=(i=e==null?void 0:e.touches)!=null&&i.length?e.touches[0]:e;this.widthNavmenu=t.clientX,localStorage.setItem("widthNavmenu",this.widthNavmenu)},draggingSidemenu(e){var i;let t=(i=e==null?void 0:e.touches)!=null&&i.length?e.touches[0]:e;this.widthSidemenu=window.innerWidth-t.clientX,localStorage.setItem("widthSidemenu",this.widthSidemenu)},async remove(e){this.selected&&this.ast.id(this.selected)===this.ast.id(e)&&(this.selected=null,this.selectedType=null,this.getNavTitle()),await this.ast.remove(e)},async removeSafe(e){if(this.selectedType==="style"){let t=-1,i=0;for(const n of this.selectedParent||[]){if(n===this.selected){t=i;break}i++}t>-1&&(this.selectedParent.splice(t,1),await this.save())}else this.selected&&this.ast.id(this.selected)===this.ast.id(e)&&(this.selected=null,this.selectedType=null,this.getNavTitle()),await this.ast.remove(e)},async drop(e){var t,i,n,r,s,d;if(e!=null&&e.target){const h=!((d=(s=(r=(n=(i=(t=this.ast)==null?void 0:t.AST)==null?void 0:i.html)==null?void 0:n[0])==null?void 0:r[0])==null?void 0:s.children)!=null&&d.filter(l=>l.type!=="text").length);if(this.insert)["top","left"].includes(e.position)?await this.ast.before(e.target,this.insert):["bottom","right"].includes(e.position)?await this.ast.after(e.target,this.insert):await this.ast.inside(e.target,this.insert);else return await this.domove(e);this.insert=this.moving=null,await this.save(),h&&await this.reload()}else this.insert=this.moving=null},async domove(e){var t;if(this.moving){let i=(t=this.moving)!=null&&t.sid?this.ast.search(this.moving.sid):this.moving;["top","left"].includes(e.position)?(await this.ast.remove(i),await this.ast.before(e.target,i)):["bottom","right"].includes(e.position)?(await this.ast.remove(i),await this.ast.after(e.target,i)):(await this.ast.remove(i),await this.ast.inside(e.target,i)),await this.save()}this.insert=this.moving=null},getNavTitle(){var e;this.selectedType==="element"?this.fsItemTitle=((e=this.selected)==null?void 0:e.name)||"":this.selectedType==="style"&&this.selected.type==="rule"?this.fsItemTitle=this.selected.selectors.join(", "):this.selectedType==="style"&&this.selected.type==="font-face"?this.fsItemTitle=this.selected.type:this.selectedType==="style"&&this.selected.type==="keyframe"?this.fsItemTitle=this.selected.values.join(", "):this.selected?this.fsItemTitle=this.selected.type:this.fsItemTitle=this.fsItem.title},async reload(e=!0){var t,i,n,r;try{await this.fs.stat((t=this.fsItem)==null?void 0:t.path),this.selected=null,this.selectedType=null,this.account.main=await this.fs.readFile(this.fsItem.path,{encoding:"utf8"}),this.modified=await this.packer.gitModified(),this.ast.parse(this.account.main),e&&this.broadcaster.postMessage({id:(r=(n=(i=this.account)==null?void 0:i.project)==null?void 0:n.data)==null?void 0:r.id,reload:!0})}catch{}this.renderKey++},isMobile(){let e=window.innerWidth;this.width>900&&e<=900?(this.navigator=!1,this.menu=!1):this.width<=900&&e>900&&(this.navigator=!0,this.menu=!0),this.width=e,this.mobile=this.width<=900,this.landscape=e>window.innerHeight},async move(e){await this.ast.remove(e.bullet),e.inside?await this.ast.inside(e.target,e.bullet):await this.ast.after(e.target,e.bullet),this.moving=null,await this.save()},async insertion(e){var i,n,r,s,d,h;const t=!((h=(d=(s=(r=(n=(i=this.ast)==null?void 0:i.AST)==null?void 0:n.html)==null?void 0:r[0])==null?void 0:s[0])==null?void 0:d.children)!=null&&h.filter(l=>l.type!=="text").length);e.inside?await this.ast.inside(e.target,e.bullet):await this.ast.after(e.target,e.bullet),this.insert=null,await this.save(),t&&await this.reload()},async add(e){var i,n,r,s,d,h;const t=!((h=(d=(s=(r=(n=(i=this.ast)==null?void 0:i.AST)==null?void 0:n.html)==null?void 0:r[0])==null?void 0:s[0])==null?void 0:d.children)!=null&&h.filter(l=>l.type!=="text").length);this.before?await this.ast.before(this.before,e):this.after?await this.ast.after(this.after,e):this.inside?await this.ast.inside(this.inside,e):await this.ast.init(e),this.before=this.after=this.inside=null,await this.save(),t&&await this.reload()},appendStyle(e){this.layerStyle=e,this.stylesheets=!0},async addStyle(e){this.stylesheets=!1,this.layerStyle.parent.splice(this.layerStyle.index,0,e),await this.save()},async removeStyle(e){e.parent.splice(e.index,1),await this.save()},async appendRule(e){this.layerRule=e,this.rules=!0,await this.save()},async addRule(e){this.rules=!1,this.layerRule.parent.splice(this.layerRule.index,0,e),await this.save()},async removeRule(e){e.parent.splice(e.index,1),await this.save()},async appendKeyframe(e){this.layerKeyframe=e,this.keyframes=!0,await this.save()},async addKeyframe(e){this.keyframes=!1,this.layerKeyframe.parent.splice(this.layerKeyframe.index,0,e);const t=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});this.layerKeyframe.parent.sort((i,n)=>{var r,s;return t.compare((r=i.values)==null?void 0:r[0],(s=n.values)==null?void 0:s[0])}),await this.save()},async deleteKeyframe(e){e.parent.splice(e.index,1),await this.save()},async save(e=this.ast.stringify(),t=!0){let i=this.fsItem;if(i&&i.title.includes(".vue")){const n=await this.fs.readFile(i.path,{encoding:"utf8"});if(e=Ae.html(e.replace("<template><",`<template>
<`),Oe),t&&e!==n&&!this.historyLock){this.historyLock=!0;const r=await L("undoHistory"),s=await L("redoHistory");r[i.path]||(r[i.path]=[]),s[i.path]||(s[i.path]=[]),r[i.path].push(n),r[i.path].slice(-500),s[i.path]=[],this.undoCount=r==null?void 0:r[i.path].length,this.redoCount=s==null?void 0:s[i.path].length,await M("undoHistory",r),await M("redoHistory",s),setTimeout(()=>{this.historyLock=!1},100)}await this.fs.writeFile(i.path,e.trim(),{encoding:"utf8"}),this.modified=await this.packer.gitModified(!0),this.broadcaster.postMessage({id:this.account.project.data.id,path:this.fsItem.path})}},async getCode(){var e;if(this.mobile)this.code=await this.fs.readFile(this.fsItem.path,{encoding:"utf8"});else if(!this.editorWindow||this.editorWindow.closed){const t=await this.fs.readFile(this.fsItem.path,{encoding:"utf8"});this.editorWindow=Re(t,(e=this.fsItem)==null?void 0:e.title),this.editorWindow.addEventListener("message",async i=>{i.data.event==="content-parent"&&(this.lockBroadcast=!0,this.account.main=i.data.content,this.$nextTick(async()=>{await this.save(),this.selected&&(this.selected=this.ast.search(this.ast.id(this.selected)))}))})}else this.editorWindow.focus()},async sendToWindow(e){var t;if(e&&!this.lockBroadcast){let i=this.ast.stringify();i=Ae.html(i.replace("<template><",`<template>
<`),Oe),e.postMessage({event:"content",content:i.trim(),filename:(t=this.fsItem)==null?void 0:t.title},"*")}this.$nextTick(()=>{this.lockBroadcast=!1})},async store(){var e;await this.save(),this.storingonline=!0,(e=this.account.project.data)!=null&&e.id?await this.update():await this.create(),this.storingonline=!1,this.modified=await this.packer.gitModified()},async update(){var s,d,h,l;let e=Date.now();this.account.progress.save=0,this.admin&&console.log("Committing changes",0),await this.packer.gitSave(this.admin,e),this.account.progress.save=30,this.admin&&console.log("Pushing to internal git repo new",Date.now()-e);let t=await this.services.users.authentication.getAccessToken();await this.packer.gitPush(`${this.gitserver}/git/${this.account.project.data.uuid}`,m=>{this.account.progress.save=30+m.progress*60},{"authorization-x":"Bearer "+t}),this.account.progress.save=90,this.admin&&console.log("Updating meta data.",Date.now()-e);let i=!1;try{await this.fs.stat("/tailwind.config.js"),i=!0}catch{}this.account.project.data=await this.services.manager.service("applications").patch(this.account.project.data.id,{title:this.account.project.data.title,slug:this.account.project.data.slug,description:this.account.project.data.description,icon:this.account.project.data.icon,favicon:this.account.project.data.facicon,elicon:this.account.project.data.elicon,tailwind:i});const n=(d=(s=await this.services.manager.service("application_mockups").find({query:{application_id:this.account.project.data.id}}))==null?void 0:s.data)==null?void 0:d[0];this.account.project.mockup=(n==null?void 0:n.code)||"";const r=(l=(h=await this.services.manager.service("application_git_tokens").find({query:{application_id:this.account.project.data.id,provider:"github"}}))==null?void 0:h.data)==null?void 0:l[0];this.account.project.github=r,this.account.project.data.type,this.account.progress.save=100,this.admin&&console.log("Saving to localstorage",Date.now()-e),this.account.save(),this.account.progress.save=null},async create(){var e,t,i;if((i=(t=(e=this.account)==null?void 0:e.project)==null?void 0:t.data)!=null&&i.title)await this.packer.gitSave(),this.account.project.data=await this.services.manager.service("applications").create(this.account.project.data),this.account.save(),await this.update();else{let n=prompt("Title");if(!n)return alert("A title is required");await this.packer.gitSave(),this.account.project.data=await this.services.manager.service("applications").create({title:n}),this.account.save(),await this.update()}},preview(){this.open(location.protocol+"//"+location.host+"/live-preview")},open(e){window.open(e,"_blank")},async openEditor(e){let t=await this.fs.readFile(e,{encoding:"utf8"}),i=this.editorWindows.find(n=>n.path===e);!i||i.window.closed?(i={window:Re(t,e,e),path:e},i.window.addEventListener("message",async n=>{if(n.data.event==="content-parent"&&n.data.path===e){await this.fs.writeFile(e,n.data.content,{encoding:"utf8"});let r=this.selected;await this.reload(),this.$nextTick(async()=>{r&&(this.selected=this.ast.search(this.ast.id(r)))})}}),this.editorWindows.push(i),await this.sendToFileWindow(i,t,e)):i.window.focus()},async sendToFileWindow(e,t,i){e.window.postMessage({event:"content",content:t,path:i,filename:this.fsItemTitle},"*")}}},We=()=>{pt(e=>({48513978:e.editorsTopMobile,"42beb6ca":e.mobileMenuHeight,"30dc7caf":e.navmenu,"7a265d29":e.sidemenu,"2165e1c3":e.bottomTabsHeight,"395ab301":e.breadcrumbBottom,"2815934b":e.transformToolsHeightMobile,"1037f149":e.transformToolsHeight}))},Ke=q.setup;q.setup=Ke?(e,t)=>(We(),Ke(e,t)):We;const Qt={id:"tools"},$t=["title"],xt={key:0},_t={key:1},ei={key:1,class:"code-file"},ti=["title"],ii={key:1},si={key:2,class:"code-file"},ni=["title"],ai={key:1},ri={class:"topbar"},oi={key:0,class:"add-create-container"},li=["disabled"],di=["disabled"],ui={key:2,class:"transform-tools welcome"},hi={id:"layers"},mi={class:"tabs"},fi={key:5},vi={class:"tabs-bottom"},pi=["disabled"],yi={class:"infobar"},gi={class:"tools tools--left"},ci={class:"info"},wi={key:0,style:{"margin-right":"5px"}},ki={key:1},bi={key:2},Ci={key:3},Ni={key:4},Ii={key:5},Si={class:"tools"},Pi=["title"],ji=["title"],Ti={class:"tools-menu--wrapper"},Mi={class:"tools-menu"};function Li(e,t,i,n,r,s){var G,Z,J,Q,$,x,_,ee,te,ie,se,ne,ae,re,oe,le,de,ue,he,me,fe,ve,pe,ye,ge,ce,we,ke,be,Ce,Ne,Ie,Se,Pe,je,Te,Me,Le,De,Ee;const d=k("Navigator"),h=k("Transform"),l=k("SectionRenderer"),m=k("SectionTimeline"),S=k("SectionBreadcrumb"),f=k("SectionTree"),E=k("SectionStyles"),R=k("SectionFiles"),A=k("SectionRoutes"),b=k("SectionDeploy"),C=k("SectionVue"),P=k("ModalElements"),g=k("ModalStylesheets"),p=k("ModalRules"),c=k("ModalKeyframes"),N=k("ModalMockup"),O=k("ModalMenu"),Xe=k("ModalProfile"),Ye=k("ModalEditor"),Be=k("ModalRoutes");return u(),v("div",{class:y(["home",{mobile:e.mobile,landscape:e.landscape,mi:e.breakpoint==="mi",sm:e.breakpoint==="sm",md:e.breakpoint==="md",lg:e.breakpoint==="lg",xl:e.breakpoint==="xl",xl2:e.breakpoint==="2xl"}])},[o("div",Qt,[o("button",{onClick:t[0]||(t[0]=a=>e.mainMenu=!0),class:"main-menu",title:"Project settings"}),o("div",{title:"Vue Play v"+s.pkg.version,class:"logo",onClick:t[1]||(t[1]=a=>s.open("https://vueplay.com"))},null,8,$t),s.premium?w("",!0):(u(),v("button",{key:0,onClick:t[2]||(t[2]=a=>e.profile="Plan"),class:"upgrade",title:"Upgrade to Premium"},[e.mobile?(u(),v("span",_t,"Premium")):(u(),v("span",xt,"Get Premium Access")),t[125]||(t[125]=o("span",{style:{color:"yellow"}},"",-1))])),o("button",{onClick:t[3]||(t[3]=a=>e.profile=!0),class:y(["profile",{"profile-placeholder":!((Z=(G=s.account)==null?void 0:G.user)!=null&&Z.picture)}]),style:Y({backgroundImage:(Q=(J=s.account)==null?void 0:J.user)!=null&&Q.picture?"url("+((x=($=s.account)==null?void 0:$.user)==null?void 0:x.picture)+")":""}),title:"Show profile"},null,6),e.mobile?w("",!0):(u(),v("div",ei,[(ee=(_=s.account)==null?void 0:_.project)!=null&&ee.data?(u(),v("span",{key:0,class:"project-title",title:((ie=(te=s.account.project)==null?void 0:te.data)==null?void 0:ie.type)==="vue-sfc"?"Components":"Applications",onClick:t[4]||(t[4]=a=>{var W,K;return e.mainMenu=((K=(W=s.account.project)==null?void 0:W.data)==null?void 0:K.type)==="vue-sfc"?"Components":"Applications"})},j((ae=(ne=(se=s.account)==null?void 0:se.project)==null?void 0:ne.data)==null?void 0:ae.title),9,ti)):w("",!0),(re=e.fsItem)!=null&&re.title?(u(),v("span",ii," / ")):w("",!0),(oe=e.fsItem)!=null&&oe.title?(u(),v("b",{key:2,class:"project-title",onClick:t[5]||(t[5]=(...a)=>s.getCode&&s.getCode(...a)),title:"Edit code"},[Fe(j((le=e.fsItem)==null?void 0:le.title)+" ",1),t[126]||(t[126]=o("div",{class:"code-edit"},null,-1))])):w("",!0)])),e.mobile?(u(),v("div",si,[(ue=(de=s.account)==null?void 0:de.project)!=null&&ue.data?(u(),v("span",{key:0,class:"project-title",title:((me=(he=s.account.project)==null?void 0:he.data)==null?void 0:me.type)==="vue-sfc"?"Components":"Applications",onClick:t[6]||(t[6]=a=>{var W,K;return e.mainMenu=((K=(W=s.account.project)==null?void 0:W.data)==null?void 0:K.type)==="vue-sfc"?"Components":"Applications"})},j((pe=(ve=(fe=s.account)==null?void 0:fe.project)==null?void 0:ve.data)==null?void 0:pe.title),9,ni)):w("",!0),(ye=e.fsItem)!=null&&ye.title?(u(),v("br",ai)):w("",!0),(ge=e.fsItem)!=null&&ge.title?(u(),v("b",{key:2,class:"project-title",onClick:t[7]||(t[7]=(...a)=>s.getCode&&s.getCode(...a)),title:"Edit code"},[Fe(j((ce=e.fsItem)==null?void 0:ce.title)+" ",1),t[127]||(t[127]=o("div",{class:"code-edit small"},null,-1))])):w("",!0)])):w("",!0)]),D(I(d,{onSave:t[8]||(t[8]=a=>s.save()),onStore:t[9]||(t[9]=a=>s.store()),onInsert:t[10]||(t[10]=a=>e.insert=a),onChanged:s.reload,onFixFontImport:s.fixFontImport,onBreakpoint:t[11]||(t[11]=a=>e.breakpoint=a),onDarkmode:t[12]||(t[12]=a=>e.darkmode=a),onGroup:t[13]||(t[13]=a=>e.group=a),onReload:t[14]||(t[14]=a=>s.reload()),onRemoveComponent:t[15]||(t[15]=a=>s.save().then(()=>s.reload())),onUpgrade:t[16]||(t[16]=a=>e.profile="Plan"),onRefreshContent:t[17]||(t[17]=a=>e.refreshContentBackwards++),modified:e.modified,breakpoint:e.breakpoint,storingonline:e.storingonline,header:e.fsItemTitle,element:e.selected,parent:e.selectedParent,type:e.selectedType,empty:s.emptyProject,ast:e.ast,path:(we=e.fsItem)==null?void 0:we.path,refresh:e.refreshContent,id:"navigator"},null,8,["onChanged","onFixFontImport","modified","breakpoint","storingonline","header","element","parent","type","empty","ast","path","refresh"]),[[F,e.navigator]]),e.mobile?w("",!0):(u(),v("div",{key:0,class:"resizer-navigator",onMousedown:t[18]||(t[18]=a=>e.dragNavigator=!0),onTouchstart:t[19]||(t[19]=a=>e.dragNavigator=!0)},null,32)),e.dragNavigator?(u(),v("div",{key:1,class:"cover",onMousemove:t[20]||(t[20]=(...a)=>s.draggingNavigator&&s.draggingNavigator(...a)),onTouchmove:t[21]||(t[21]=(...a)=>s.draggingNavigator&&s.draggingNavigator(...a)),onMouseup:t[22]||(t[22]=a=>e.dragNavigator=!1),onTouchend:t[23]||(t[23]=a=>e.dragNavigator=!1)},null,32)):w("",!0),I(h,{class:"transform-tools",onSelection:t[24]||(t[24]=a=>(e.selected=e.ast.search(a),e.selectedType="element")),onParent:t[25]||(t[25]=a=>e.selectedParent=a),onSelected:t[26]||(t[26]=a=>e.selected=a),onDrop:s.drop,onMove:t[27]||(t[27]=a=>e.moving=a),onBefore:t[28]||(t[28]=a=>e.before=a),onAfter:t[29]||(t[29]=a=>e.after=a),onInside:t[30]||(t[30]=a=>e.inside=a),onDuplicate:t[31]||(t[31]=a=>e.ast.duplicate(a)),onRemove:s.remove,onRemoveSafe:s.removeSafe,onUndo:s.undo,onRedo:s.redo,onRoute:t[32]||(t[32]=a=>e.route=a),onStore:t[33]||(t[33]=a=>s.store()),onRefreshContent:t[34]||(t[34]=a=>e.refreshContent++),refreshContent:e.refreshContentBackwards,helper:e.helper,moving:e.moving,insert:e.insert,element:e.selected,parent:e.selectedParent,type:e.selectedType,mobile:e.mobile,showTransform:e.showTransform,showPosition:e.showPosition,ast:e.ast,path:(ke=e.fsItem)==null?void 0:ke.path},null,8,["onDrop","onRemove","onRemoveSafe","onUndo","onRedo","refreshContent","helper","moving","insert","element","parent","type","mobile","showTransform","showPosition","ast","path"]),o("div",ri,[o("button",{title:"Hard reload",onClick:t[35]||(t[35]=a=>s.reload()),class:"screen ref"}),o("button",{onClick:t[36]||(t[36]=a=>e.darkmode=!e.darkmode),class:y([{light:!e.darkmode,dark:e.darkmode},"screen"])},null,2),o("button",{onClick:t[37]||(t[37]=a=>e.breakpoint!=="2xl"?e.breakpoint="2xl":e.breakpoint=null),class:y([{active:e.breakpoint==="2xl"},"screen xl2"])},null,2),o("button",{onClick:t[38]||(t[38]=a=>e.breakpoint!=="xl"?e.breakpoint="xl":e.breakpoint=null),class:y([{active:e.breakpoint==="xl"},"screen xl"])},null,2),o("button",{onClick:t[39]||(t[39]=a=>e.breakpoint!=="lg"?e.breakpoint="lg":e.breakpoint=null),class:y([{active:e.breakpoint==="lg"},"screen lg"])},null,2),o("button",{onClick:t[40]||(t[40]=a=>e.breakpoint!=="md"?e.breakpoint="md":e.breakpoint=null),class:y([{active:e.breakpoint==="md"},"screen md"])},null,2),o("button",{onClick:t[41]||(t[41]=a=>e.breakpoint!=="sm"?e.breakpoint="sm":e.breakpoint=null),class:y([{active:e.breakpoint==="sm"},"screen sm"])},null,2),o("button",{onClick:t[42]||(t[42]=a=>e.breakpoint!=="mi"?e.breakpoint="mi":e.breakpoint=null),class:y([{active:e.breakpoint==="mi"},"screen mi"])},null,2),o("button",{onClick:t[49]||(t[49]=a=>e.addCreate=!e.addCreate),onBlur:t[50]||(t[50]=a=>e.addCreate=!1),class:y([{active:e.addCreate},"add"])},[t[131]||(t[131]=o("img",{width:"12",src:mt},null,-1)),t[132]||(t[132]=o("svg",{viewBox:"0 0 16 16",height:"16",width:"16"},[o("path",{d:"m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z"})],-1)),e.addCreate?(u(),v("div",oi,[o("button",{onPointerdown:t[43]||(t[43]=H(()=>{},["stop","prevent"])),onClick:t[44]||(t[44]=a=>s.addFile("component"))},t[128]||(t[128]=[o("div",{style:{"margin-right":"12px",width:"12px",display:"inline-block"}},[o("img",{src:Gt,style:{width:"130%",translate:"-2px 3px"}})],-1),o("span",null,"New component",-1)]),32),o("button",{onPointerdown:t[45]||(t[45]=H(()=>{},["stop","prevent"])),onClick:t[46]||(t[46]=a=>s.addFile("view"))},t[129]||(t[129]=[o("div",{style:{"margin-right":"12px",width:"12px",display:"inline-block"}},[o("img",{src:Zt,style:{width:"100%",translate:"0px 1px"}})],-1),o("span",null,"New view",-1)]),32),o("button",{onPointerdown:t[47]||(t[47]=H(()=>{},["stop","prevent"])),onClick:t[48]||(t[48]=a=>e.updateRoutes=!e.updateRoutes)},t[130]||(t[130]=[o("div",{style:{"margin-right":"12px",width:"12px",display:"inline-block"}},[o("img",{src:Jt,style:{width:"100%",translate:"0px 1px"}})],-1),o("span",null,"Edit routes",-1)]),32)])):w("",!0)],34),o("button",{class:"undo",onClick:t[51]||(t[51]=a=>s.undo()),disabled:e.undoCount<=0},null,8,li),o("button",{class:"redo",onClick:t[52]||(t[52]=a=>s.redo()),disabled:e.redoCount<=0},null,8,di)]),s.emptyProject?(u(),v("div",ui,[t[133]||(t[133]=o("h1",{style:{margin:"35vh 0px 0px"}},"Welcome to",-1)),t[134]||(t[134]=o("h1",{style:{margin:"0px","font-size":"50px",color:"white"}}," Vue Play Studio ",-1)),o("button",{class:"open-project-button",onClick:t[53]||(t[53]=a=>e.mainMenu="Applications")}," Create or Open Project ")])):w("",!0),D(I(l,{path:(be=e.fsItem)==null?void 0:be.path,ast:e.ast.root,sidemenu:s.sidemenu,navmenu:s.navmenu,mobile:e.mobile,events:e.events,timeline:e.timeline,renderKey:e.renderKey,routerOverlay:e.routerOverlay,alwaysMount:e.alwaysMount,darkmode:e.darkmode,onInit:t[54]||(t[54]=a=>e.renderKey++)},null,8,["path","ast","sidemenu","navmenu","mobile","events","timeline","renderKey","routerOverlay","alwaysMount","darkmode"]),[[F,!s.emptyProject]]),e.timeline?(u(),T(m,{key:3,class:"timeline",keyframesName:e.keyframesName,keyframes:e.keyframesTimeline,selected:e.selected,onSelection:t[55]||(t[55]=a=>(e.selected=a,e.selectedType="style")),onAddKeyframe:s.appendKeyframe,onDeleteKeyframe:s.deleteKeyframe,onParent:t[56]||(t[56]=a=>e.selectedParent=a),onSave:t[57]||(t[57]=a=>s.save())},null,8,["keyframesName","keyframes","selected","onAddKeyframe","onDeleteKeyframe"])):w("",!0),I(S,{onSelection:t[58]||(t[58]=a=>(e.selected=a,e.selectedType="element")),onSelected:t[59]||(t[59]=a=>e.fsItem=a),onMap:t[60]||(t[60]=a=>e.componentRouteMappings=a),class:"breadcrumbbar",path:(Ce=e.fsItem)==null?void 0:Ce.path,ast:e.ast,selected:e.selected,route:e.route,renderKey:e.renderKey},null,8,["path","ast","selected","route","renderKey"]),e.mobile?w("",!0):(u(),v("div",{key:4,class:"resizer-sidemenu",onMousedown:t[61]||(t[61]=a=>e.dragSidemenu=!0),onTouchstart:t[62]||(t[62]=a=>e.dragSidemenu=!0)},null,32)),e.dragSidemenu?(u(),v("div",{key:5,class:"cover",onMousemove:t[63]||(t[63]=(...a)=>s.draggingSidemenu&&s.draggingSidemenu(...a)),onTouchmove:t[64]||(t[64]=(...a)=>s.draggingSidemenu&&s.draggingSidemenu(...a)),onMouseup:t[65]||(t[65]=a=>e.dragSidemenu=!1),onTouchend:t[66]||(t[66]=a=>e.dragSidemenu=!1)},null,32)):w("",!0),D(o("div",{id:"editors",style:Y(e.moving||e.insert?"z-index: 101!important":"")},[D(o("div",hi,[o("div",mi,[o("button",{class:y(["tab component",e.layers==="component"?"active":""]),title:"Layers",onClick:t[67]||(t[67]=a=>e.layers="component")},null,2),o("button",{class:y(["tab style",e.layers==="styles"?"active":""]),title:"Style",onClick:t[68]||(t[68]=a=>e.layers="styles")},null,2),o("button",{class:y(["tab vue",e.layers==="vue"?"active":""]),title:"Options API",onClick:t[69]||(t[69]=a=>e.layers="vue")},null,2)]),e.layers==="component"?(u(),T(f,{key:0,parent:e.ast.html,selected:e.selected,type:e.selectedType,mobile:e.mobile,moving:e.moving?(Ne=e.moving)!=null&&Ne.sid?e.ast.search((Ie=e.moving)==null?void 0:Ie.sid):e.moving:"",insert:e.insert,ast:e.ast,onSelection:t[70]||(t[70]=a=>(e.selected=a,e.selectedType="element")),onParent:t[71]||(t[71]=a=>e.selectedParent=a),onDelete:t[72]||(t[72]=a=>s.remove(a)),onBefore:t[73]||(t[73]=a=>e.before=a),onAfter:t[74]||(t[74]=a=>e.after=a),onInside:t[75]||(t[75]=a=>e.inside=a),onDuplicate:t[76]||(t[76]=a=>e.ast.duplicate(a)),onMoveit:t[77]||(t[77]=a=>(e.selected=a,e.selectedType="element",e.$nextTick(()=>{e.moving=a,e.server.send({event:"positions-excluded"})}))),onMove:s.move,onInsert:s.insertion,onDragEnd:t[78]||(t[78]=a=>e.moving=null)},null,8,["parent","selected","type","mobile","moving","insert","ast","onMove","onInsert"])):e.layers==="styles"?(u(),T(E,{key:1,onSelection:t[79]||(t[79]=a=>(e.selected=a,e.selectedType="style")),onParent:t[80]||(t[80]=a=>e.selectedParent=a),onAdd:s.appendStyle,onDelete:s.removeStyle,onAddRule:s.appendRule,onDeleteRule:s.removeRule,onAddKeyframe:s.appendKeyframe,onDeleteKeyframe:s.deleteKeyframe,onSave:t[81]||(t[81]=a=>s.save()),parent:e.ast.css,selected:e.selected},null,8,["onAdd","onDelete","onAddRule","onDeleteRule","onAddKeyframe","onDeleteKeyframe","parent","selected"])):e.layers==="files"?(u(),T(R,{key:2,mobile:e.mobile,selected:e.fsItem,renderKey:e.renderKey,syncing:e.syncing,loadingSync:e.loadingSync,ast:e.ast,onCodeEditor:t[82]||(t[82]=a=>s.openEditor(a)),onSelected:t[83]||(t[83]=a=>e.fsItem=a),onCreate:t[84]||(t[84]=a=>s.reload()),onUpdate:t[85]||(t[85]=a=>s.reload()),onDelete:t[86]||(t[86]=a=>s.reload()),onSync:s.sync,onSyncOff:s.syncOff},null,8,["mobile","selected","renderKey","syncing","loadingSync","ast","onSync","onSyncOff"])):e.layers==="routes"?(u(),T(A,{key:3,onSelected:t[87]||(t[87]=a=>e.fsItem=a),onRoute:t[88]||(t[88]=a=>e.route=a),onCodeEditor:t[89]||(t[89]=a=>s.openEditor(a)),renderKey:e.renderKey,mappings:e.componentRouteMappings,filepath:(Se=e.fsItem)==null?void 0:Se.path},null,8,["renderKey","mappings","filepath"])):e.layers==="deploy"?(u(),T(b,{key:4,mobile:e.mobile,ast:e.ast},null,8,["mobile","ast"])):w("",!0),e.ast.js?(u(),v("div",fi,[D(I(C,{onSave:t[90]||(t[90]=a=>s.save().then(()=>a())),onReload:t[91]||(t[91]=a=>(e.ast.insertcomponent=null,s.reload())),onReset:t[92]||(t[92]=a=>e.ast.insertcomponent=null),file:(Pe=e.fsItem)==null?void 0:Pe.title,parent:e.ast.js,insertcomponent:e.ast.insertcomponent},null,8,["file","parent","insertcomponent"]),[[F,e.layers==="vue"]])])):w("",!0)],512),[[F,!s.emptyProject]]),D(o("div",vi,[o("button",{class:y(["tab folder",e.layers==="files"?"active":""]),title:"Files",onClick:t[93]||(t[93]=a=>e.layers="files")},null,2),o("button",{class:y(["tab routes",e.layers==="routes"?"active":""]),title:"Routes",disabled:((Te=(je=s.account.project)==null?void 0:je.data)==null?void 0:Te.type)==="vue-sfc",onClick:t[94]||(t[94]=a=>e.layers="routes")},null,10,pi),o("button",{class:y(["tab deploy",e.layers==="deploy"?"active":""]),title:"Deploy",onClick:t[95]||(t[95]=a=>e.layers="deploy")},null,2)],512),[[F,!s.emptyProject]])],4),[[F,e.menu]]),o("div",yi,[o("div",gi,[e.mobile?(u(),v("button",{key:1,title:"Navigator",class:y(["menu left",{active:!e.menu}]),onClick:t[97]||(t[97]=a=>(e.menu=!e.menu,e.navigator=!1))},null,2)):(u(),v("button",{key:0,title:"Navigator",class:y(["menu left",{active:!e.navigator}]),onClick:t[96]||(t[96]=a=>e.navigator=!e.navigator)},null,2))]),o("div",ci,[e.fsItem?(u(),v("span",wi,[t[135]||(t[135]=o("b",null,"File:",-1)),t[136]||(t[136]=o("br",null,null,-1)),o("span",null,j(e.fsItem.title),1)])):w("",!0),e.selectedType==="element"?(u(),v("span",ki,[t[137]||(t[137]=o("b",null,"Element:",-1)),t[138]||(t[138]=o("br",null,null,-1)),o("span",null,j(((Me=e.selected)==null?void 0:Me.name)||"-"),1)])):e.selectedType==="style"&&e.selected.type==="rule"?(u(),v("span",bi,[t[139]||(t[139]=o("b",null,"Selector:",-1)),t[140]||(t[140]=o("br",null,null,-1)),o("span",null,j(e.selected.selectors.join(", ")),1)])):e.selectedType==="style"&&e.selected.type==="font-face"?(u(),v("span",Ci,[t[141]||(t[141]=o("b",null,"Style:",-1)),t[142]||(t[142]=o("br",null,null,-1)),o("span",null,j(e.selected.type),1)])):e.selectedType==="style"&&e.selected.type==="keyframe"?(u(),v("span",Ni,[t[143]||(t[143]=o("b",null,"Keyframe:",-1)),t[144]||(t[144]=o("br",null,null,-1)),o("span",null,j(e.selected.values.join(", ")),1)])):e.selected?(u(),v("span",Ii,[t[145]||(t[145]=o("b",null,"Style:",-1)),t[146]||(t[146]=o("br",null,null,-1)),o("span",null,j(e.selected.type),1)])):w("",!0)]),o("div",Si,[e.mobile?(u(),v("button",{key:1,title:"Menu",class:y(["menu",{active:e.navigator}]),onClick:t[99]||(t[99]=a=>(e.navigator=!e.navigator,e.menu=!1))},null,2)):(u(),v("button",{key:0,title:"Menu",class:y(["menu",{active:e.menu}]),onClick:t[98]||(t[98]=a=>e.menu=!e.menu)},null,2)),o("button",{class:"preview",title:"Open live-preview",onClick:t[100]||(t[100]=(...a)=>s.preview&&s.preview(...a))}),o("button",{class:"mockup",title:"Mockup",onClick:t[101]||(t[101]=a=>e.mockup=!0)}),o("button",{class:y(["events",{active:e.events}]),title:(e.events?"Disable":"Enable")+" click events",onClick:t[102]||(t[102]=a=>e.events=!e.events)},null,10,Pi),o("button",{class:y(["clock",{active:e.timeline}]),title:(e.timeline?"Close":"Open")+" timeline",onClick:t[103]||(t[103]=a=>e.timeline=!e.timeline)},null,10,ji),o("button",{class:y([{position:e.showPosition,transform:e.showTransform},"tools-button"]),title:"Tools"},[o("div",Ti,[o("div",Mi,[o("button",{class:y(["always-mount",{active:e.alwaysMount}]),title:"Mount on template change",onClick:t[104]||(t[104]=a=>e.alwaysMount=!e.alwaysMount)},null,2),o("button",{class:y(["select-helper",{active:e.helper}]),title:"Select helper",onClick:t[105]||(t[105]=a=>e.helper=!e.helper)},null,2),o("button",{class:y(["show-transform",{active:e.showTransform}]),title:"Transform",onClick:t[106]||(t[106]=a=>(e.showTransform=!0,e.showPosition=!1))},null,2),o("button",{class:y(["show-position",{active:e.showPosition}]),title:"Position",onClick:t[107]||(t[107]=a=>(e.showPosition=!0,e.showTransform=!1))},null,2),o("button",{class:y(["show-none",{active:!e.showPosition&&!e.showTransform}]),title:"Hide helpers",onClick:t[108]||(t[108]=a=>(e.showPosition=!1,e.showTransform=!1))},null,2)])])],2)])]),I(P,{open:e.before||e.after||e.inside,onSelection:t[109]||(t[109]=a=>s.add(a)),onClose:t[110]||(t[110]=a=>e.before=e.after=e.inside=null),onUpgrade:t[111]||(t[111]=a=>(e.before=e.after=e.inside=null,e.profile="Plan"))},null,8,["open"]),I(g,{open:e.stylesheets,onClose:t[112]||(t[112]=a=>e.stylesheets=!1),onSelection:t[113]||(t[113]=a=>s.addStyle(a))},null,8,["open"]),I(p,{open:e.rules,onClose:t[114]||(t[114]=a=>e.rules=!1),onSelection:t[115]||(t[115]=a=>s.addRule(a))},null,8,["open"]),I(c,{open:e.keyframes,onClose:t[116]||(t[116]=a=>e.keyframes=!1),onSelection:t[117]||(t[117]=a=>s.addKeyframe(a))},null,8,["open"]),I(N,{mobile:e.mobile,open:e.mockup,setPage:e.mockup,onClose:t[118]||(t[118]=a=>e.mockup=!1),onChanged:s.reload},null,8,["mobile","open","setPage","onChanged"]),I(O,{mobile:e.mobile,open:e.mainMenu,setPage:e.mainMenu,onClose:t[119]||(t[119]=a=>e.mainMenu=!1),onChanged:s.reload},null,8,["mobile","open","setPage","onChanged"]),I(Xe,{mobile:e.mobile,open:e.profile||!((Le=s.account)!=null&&Le.user),setPage:e.profile,ast:e.ast,onClose:t[120]||(t[120]=a=>e.profile=!1),onLogout:t[121]||(t[121]=a=>e.profile=!1),onChanged:s.reload},null,8,["mobile","open","setPage","ast","onChanged"]),I(Ye,{open:((De=e.fsItem)==null?void 0:De.path)&&e.code,code:e.code,path:(Ee=e.fsItem)==null?void 0:Ee.path,language:"vue",onChange:t[122]||(t[122]=a=>s.save(a).then(()=>{s.reload()})),onClose:t[123]||(t[123]=a=>e.code=null)},null,8,["open","code","path"]),I(Be,{open:e.updateRoutes,mobile:e.mobile,mappings:e.componentRouteMappings,onChanged:s.reload,onClose:t[124]||(t[124]=a=>e.updateRoutes=!1)},null,8,["open","mobile","mappings","onChanged"])],2)}const Fi=B(q,[["render",Li],["__scopeId","data-v-e326029b"]]);export{Fi as default};
